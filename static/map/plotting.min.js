!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.plotting=e():t.plotting=e()}(window,function(){return function(t){var e=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function(t,o){!function(t,e){if(!C[t]||!m[t])return;for(var o in m[t]=!1,e)Object.prototype.hasOwnProperty.call(e,o)&&(g[o]=e[o]);0==--v&&0===P&&E()}(t,o),e&&e(t,o)};var o,n=!0,i="a45c8ab912875c557f85",r=1e4,s={},a=[],c=[];function u(t){var e=A[t];if(!e)return b;var n=function(n){return e.hot.active?(A[n]?-1===A[n].parents.indexOf(t)&&A[n].parents.push(t):(a=[t],o=n),-1===e.children.indexOf(n)&&e.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+t),a=[]),b(n)},i=function(t){return{configurable:!0,enumerable:!0,get:function(){return b[t]},set:function(e){b[t]=e}}};for(var r in b)Object.prototype.hasOwnProperty.call(b,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,i(r));return n.e=function(t){return"ready"===h&&d("prepare"),P++,b.e(t).then(e,function(t){throw e(),t});function e(){P--,"prepare"===h&&(_[t]||O(t),0===P&&0===v&&E())}},n.t=function(t,e){return 1&e&&(t=n(t)),b.t(t,-2&e)},n}function p(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:o!==t,active:!0,accept:function(t,o){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._acceptedDependencies[t[n]]=o||function(){};else e._acceptedDependencies[t]=o||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var o=0;o<t.length;o++)e._declinedDependencies[t[o]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var o=e._disposeHandlers.indexOf(t);o>=0&&e._disposeHandlers.splice(o,1)},check:T,apply:M,status:function(t){if(!t)return h;l.push(t)},addStatusHandler:function(t){l.push(t)},removeStatusHandler:function(t){var e=l.indexOf(t);e>=0&&l.splice(e,1)},data:s[t]};return o=void 0,e}var l=[],h="idle";function d(t){h=t;for(var e=0;e<l.length;e++)l[e].call(null,t)}var f,g,y,v=0,P=0,_={},m={},C={};function w(t){return+t+""===t?+t:t}function T(t){if("idle"!==h)throw new Error("check() is only allowed in idle status");return n=t,d("check"),(e=r,e=e||1e4,new Promise(function(t,o){if("undefined"==typeof XMLHttpRequest)return o(new Error("No browser support"));try{var n=new XMLHttpRequest,r=b.p+""+i+".hot-update.json";n.open("GET",r,!0),n.timeout=e,n.send(null)}catch(t){return o(t)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)o(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)o(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(t){return void o(t)}t(e)}}})).then(function(t){if(!t)return d("idle"),null;m={},_={},C=t.c,y=t.h,d("prepare");var e=new Promise(function(t,e){f={resolve:t,reject:e}});g={};return O(7),"prepare"===h&&0===P&&0===v&&E(),e});var e}function O(t){C[t]?(m[t]=!0,v++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=b.p+""+t+"."+i+".hot-update.js",document.head.appendChild(e)}(t)):_[t]=!0}function E(){d("ready");var t=f;if(f=null,t)if(n)Promise.resolve().then(function(){return M(n)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var o in g)Object.prototype.hasOwnProperty.call(g,o)&&e.push(w(o));t.resolve(e)}}function M(e){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var o,n,r,c,u;function p(t){for(var e=[t],o={},n=e.map(function(t){return{chain:[t],id:t}});n.length>0;){var i=n.pop(),r=i.id,s=i.chain;if((c=A[r])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:r};if(c.hot._main)return{type:"unaccepted",chain:s,moduleId:r};for(var a=0;a<c.parents.length;a++){var u=c.parents[a],p=A[u];if(p){if(p.hot._declinedDependencies[r])return{type:"declined",chain:s.concat([u]),moduleId:r,parentId:u};-1===e.indexOf(u)&&(p.hot._acceptedDependencies[r]?(o[u]||(o[u]=[]),l(o[u],[r])):(delete o[u],e.push(u),n.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:o}}function l(t,e){for(var o=0;o<e.length;o++){var n=e[o];-1===t.indexOf(n)&&t.push(n)}}e=e||{};var f={},v=[],P={},_=function(){console.warn("[HMR] unexpected require("+T.moduleId+") to disposed module")};for(var m in g)if(Object.prototype.hasOwnProperty.call(g,m)){var T;u=w(m);var O=!1,E=!1,M=!1,I="";switch((T=g[m]?p(u):{type:"disposed",moduleId:m}).chain&&(I="\nUpdate propagation: "+T.chain.join(" -> ")),T.type){case"self-declined":e.onDeclined&&e.onDeclined(T),e.ignoreDeclined||(O=new Error("Aborted because of self decline: "+T.moduleId+I));break;case"declined":e.onDeclined&&e.onDeclined(T),e.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+T.moduleId+" in "+T.parentId+I));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(T),e.ignoreUnaccepted||(O=new Error("Aborted because "+u+" is not accepted"+I));break;case"accepted":e.onAccepted&&e.onAccepted(T),E=!0;break;case"disposed":e.onDisposed&&e.onDisposed(T),M=!0;break;default:throw new Error("Unexception type "+T.type)}if(O)return d("abort"),Promise.reject(O);if(E)for(u in P[u]=g[u],l(v,T.outdatedModules),T.outdatedDependencies)Object.prototype.hasOwnProperty.call(T.outdatedDependencies,u)&&(f[u]||(f[u]=[]),l(f[u],T.outdatedDependencies[u]));M&&(l(v,[T.moduleId]),P[u]=_)}var S,F=[];for(n=0;n<v.length;n++)u=v[n],A[u]&&A[u].hot._selfAccepted&&P[u]!==_&&F.push({module:u,errorHandler:A[u].hot._selfAccepted});d("dispose"),Object.keys(C).forEach(function(t){!1===C[t]&&function(t){delete installedChunks[t]}(t)});for(var L,D,x=v.slice();x.length>0;)if(u=x.pop(),c=A[u]){var j={},N=c.hot._disposeHandlers;for(r=0;r<N.length;r++)(o=N[r])(j);for(s[u]=j,c.hot.active=!1,delete A[u],delete f[u],r=0;r<c.children.length;r++){var k=A[c.children[r]];k&&((S=k.parents.indexOf(u))>=0&&k.parents.splice(S,1))}}for(u in f)if(Object.prototype.hasOwnProperty.call(f,u)&&(c=A[u]))for(D=f[u],r=0;r<D.length;r++)L=D[r],(S=c.children.indexOf(L))>=0&&c.children.splice(S,1);for(u in d("apply"),i=y,P)Object.prototype.hasOwnProperty.call(P,u)&&(t[u]=P[u]);var H=null;for(u in f)if(Object.prototype.hasOwnProperty.call(f,u)&&(c=A[u])){D=f[u];var R=[];for(n=0;n<D.length;n++)if(L=D[n],o=c.hot._acceptedDependencies[L]){if(-1!==R.indexOf(o))continue;R.push(o)}for(n=0;n<R.length;n++){o=R[n];try{o(D)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[n],error:t}),e.ignoreErrored||H||(H=t)}}}for(n=0;n<F.length;n++){var U=F[n];u=U.module,a=[u];try{b(u)}catch(t){if("function"==typeof U.errorHandler)try{U.errorHandler(t)}catch(o){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:o,originalError:t}),e.ignoreErrored||H||(H=o),H||(H=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:u,error:t}),e.ignoreErrored||H||(H=t)}}return H?(d("fail"),Promise.reject(H)):(d("idle"),new Promise(function(t){t(v)}))}var A={};function b(e){if(A[e])return A[e].exports;var o=A[e]={i:e,l:!1,exports:{},hot:p(e),parents:(c=a,a=[],c),children:[]};return t[e].call(o.exports,o,o.exports,u(e)),o.l=!0,o.exports}return b.m=t,b.c=A,b.d=function(t,e,o){b.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},b.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},b.t=function(t,e){if(1&e&&(t=b(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(b.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)b.d(o,n,function(e){return t[e]}.bind(null,n));return o},b.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return b.d(e,"a",e),e},b.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},b.p="",b.h=function(){return i},u("XhbY")(b.s="XhbY")}({"+LXD":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("r5cf"),s=o("dqH4"),a=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.tailWidthFactor=.1,n.swallowTailFactor=1,n.type="tailedsquadcombat",n.headHeightFactor=.18,n.headWidthFactor=.3,n.neckHeightFactor=.85,n.neckWidthFactor=.15,n.setPoints(e),n}return i(e,t),e.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var o=this.getPoints(),n=this.getTailPoints(o),i=this.getArrowHeadPoints(o,n[0],n[2]),r=i[0],s=i[4],a=this.getArrowBodyPoints(o,r,s,this.tailWidthFactor);e=a.length;var c=[n[0]].concat(a.slice(0,e/2));c.push(r);var u=[n[2]].concat(a.slice(e/2,e));u.push(s),c=this.pu.getQBSplinePoints(c),u=this.pu.getQBSplinePoints(u),t.prototype.setCoordinates.call(this,[c.concat(i,u.reverse(),[n[1],c[0]])])}},e.prototype.getTailPoints=function(t){var e=this.pu.getBaseLength(t)*this.tailWidthFactor,o=this.pu.getThirdPoint(t[1],t[0],s.PlotConstants.HALF_PI,e,!1),n=this.pu.getThirdPoint(t[1],t[0],s.PlotConstants.HALF_PI,e,!0),i=e*this.swallowTailFactor;return[o,this.pu.getThirdPoint(t[1],t[0],0,i,!0),n]},e}(r.OlAttackArrow);e.OlTailedSquadCombat=a},"+swA":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("9mG3"),r=o("Fa6A"),s=o("Lc+J"),a=function(){function t(){}return t.featuresAtClick=function(t,e,o){return this.featuresAt(t,e,o,o.options.clickBuffer)},t.featuresAtTouch=function(t,e,o){return this.featuresAt(t,e,o,o.options.touchBuffer)},t.featuresAt=function(t,e,o,n){var a=this;if(null===o.map)return[];var c=t?r.MapEventToBoundingBox.mapEventToBoundingBox(t,n):e,u={};o.options.styles&&(u.layers=o.options.styles.map(function(t){return t.id}));var p=o.map.queryRenderedFeatures(c,u).filter(function(t){return-1!==a.META_TYPES.indexOf(t.properties.meta)}),l=new s.StringSet,h=[];return p.forEach(function(t){var e=t.properties.id;l.has(e)||(l.add(e),h.push(t))}),i.SortFeatures.sortFeatures(h)},t.META_TYPES=[n.Constants.meta.FEATURE,n.Constants.meta.MIDPOINT,n.Constants.meta.VERTEX],t}();e.FeaturesAt=a},"/6zq":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.headHeightFactor=.25,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.connPoint=null,this.tempPoint4=null,this.type="doublearrow",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.finishDrawing=function(){3===this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4),null!=this.connPoint&&this.points.push(this.connPoint)},t.prototype.generate=function(){var t=this.getPointCount();if(!(t<2))if(2!==t){var e,o,n=this.points[0],i=this.points[1],r=this.points[2];t=this.getPointCount(),this.tempPoint4=3===t?this.getTempPoint4(n,i,r):this.points[3],this.connPoint=3===t||4===t?this.pu.mid(n,i):this.points[4],this.pu.isClockWise(n,i,r)?(e=this.getArrowPoints(n,this.connPoint,this.tempPoint4,!1),o=this.getArrowPoints(this.connPoint,i,r,!0)):(e=this.getArrowPoints(i,this.connPoint,r,!1),o=this.getArrowPoints(this.connPoint,n,this.tempPoint4,!0));var s=e.length,a=(s-5)/2,c=e.slice(0,a),u=e.slice(a,a+5),p=e.slice(a+5,s),l=o.slice(0,a),h=o.slice(a,a+5),d=o.slice(a+5,s);l=this.pu.getBezierPoints(l);var f=this.pu.getBezierPoints(d.concat(c.slice(1)));p=this.pu.getBezierPoints(p);var g=l.concat(h,f,u,p);this.geo.setCoordinates([g])}else this.geo.setCoordinates([this.points])},t.prototype.getArrowPoints=function(t,e,o,i){var r=this.pu.mid(t,e),s=this.pu.distance(r,o),a=this.pu.getThirdPoint(o,r,0,.3*s,!0),c=this.pu.getThirdPoint(o,r,0,.5*s,!0),u=[r,a=this.pu.getThirdPoint(r,a,n.PlotConstants.HALF_PI,s/5,i),c=this.pu.getThirdPoint(r,c,n.PlotConstants.HALF_PI,s/4,i),o],p=this.getArrowHeadPoints(u,[this.headHeightFactor,this.headWidthFactor],[this.neckHeightFactor,this.neckWidthFactor]),l=p[0],h=p[4],d=this.pu.distance(t,e)/this.pu.getBaseLength(u)/2,f=this.getArrowBodyPoints(u,l,h,d),g=f.length,y=f.slice(0,g/2),v=f.slice(g/2,g);return y.push(l),v.push(h),(y=y.reverse()).push(e),(v=v.reverse()).push(t),y.reverse().concat(p,v)},t.prototype.getArrowHeadPoints=function(t,e,o){var i=this.pu.getBaseLength(t)*this.headHeightFactor,r=t[t.length-1],s=(this.pu.distance(e,o),i*this.headWidthFactor),a=i*this.neckWidthFactor,c=i*this.neckHeightFactor,u=this.pu.getThirdPoint(t[t.length-2],r,0,i,!0),p=this.pu.getThirdPoint(t[t.length-2],r,0,c,!0),l=this.pu.getThirdPoint(r,u,n.PlotConstants.HALF_PI,s,!1),h=this.pu.getThirdPoint(r,u,n.PlotConstants.HALF_PI,s,!0);return[this.pu.getThirdPoint(r,p,n.PlotConstants.HALF_PI,a,!1),l,r,h,this.pu.getThirdPoint(r,p,n.PlotConstants.HALF_PI,a,!0)]},t.prototype.getArrowBodyPoints=function(t,e,o,n){for(var i=this.pu.wholeDistance(t),r=this.pu.getBaseLength(t)*n,s=(r-this.pu.distance(e,o))/2,a=0,c=[],u=[],p=1;p<t.length-1;p++){var l=this.pu.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2,h=(r/2-(a+=this.pu.distance(t[p-1],t[p]))/i*s)/Math.sin(l),d=this.pu.getThirdPoint(t[p-1],t[p],Math.PI-l,h,!0),f=this.pu.getThirdPoint(t[p-1],t[p],l,h,!1);c.push(d),u.push(f)}return c.concat(u)},t.prototype.getTempPoint4=function(t,e,o){var i,r,s,a,c=this.pu.mid(t,e),u=this.pu.distance(c,o),p=this.pu.getAngleOfThreePoints(t,c,o);return p<n.PlotConstants.HALF_PI?(r=u*Math.sin(p),s=u*Math.cos(p),a=this.pu.getThirdPoint(t,c,n.PlotConstants.HALF_PI,r,!1),i=this.pu.getThirdPoint(c,a,n.PlotConstants.HALF_PI,s,!0)):p>=n.PlotConstants.HALF_PI&&p<Math.PI?(r=u*Math.sin(Math.PI-p),s=u*Math.cos(Math.PI-p),a=this.pu.getThirdPoint(t,c,n.PlotConstants.HALF_PI,r,!1),i=this.pu.getThirdPoint(c,a,n.PlotConstants.HALF_PI,s,!1)):p>=Math.PI&&p<1.5*Math.PI?(r=u*Math.sin(p-Math.PI),s=u*Math.cos(p-Math.PI),a=this.pu.getThirdPoint(t,c,n.PlotConstants.HALF_PI,r,!0),i=this.pu.getThirdPoint(c,a,n.PlotConstants.HALF_PI,s,!0)):(r=u*Math.sin(2*Math.PI-p),s=u*Math.cos(2*Math.PI-p),a=this.pu.getThirdPoint(t,c,n.PlotConstants.HALF_PI,r,!0),i=this.pu.getThirdPoint(c,a,n.PlotConstants.HALF_PI,s,!1)),i},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t}();e.OlDoubleArrow=i},"/JwR":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("r5cf"),s=o("dqH4"),a=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.tailWidthFactor=.1,n.headHeightFactor=.18,n.headWidthFactor=.3,n.neckHeightFactor=.85,n.neckWidthFactor=.15,n.type="squadcombat",n.setPoints(e),n}return i(e,t),e.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var o=this.getPoints(),n=this.getTailPoints(o),i=this.getArrowHeadPoints(o,n[0],n[1]),r=i[0],s=i[4],a=this.getArrowBodyPoints(o,r,s,this.tailWidthFactor);e=a.length;var c=[n[0]].concat(a.slice(0,e/2));c.push(r);var u=[n[1]].concat(a.slice(e/2,e));u.push(s),c=this.pu.getQBSplinePoints(c),u=this.pu.getQBSplinePoints(u),t.prototype.setCoordinates.call(this,[c.concat(i,u.reverse())])}},e.prototype.getTailPoints=function(t){var e=this.pu.getBaseLength(t)*this.tailWidthFactor;return[this.pu.getThirdPoint(t[1],t[0],s.PlotConstants.HALF_PI,e,!1),this.pu.getThirdPoint(t[1],t[0],s.PlotConstants.HALF_PI,e,!0)]},e}(r.OlAttackArrow);e.OlSquadCombat=a},"/bdh":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("ilPD"),s=o("XvwO"),a=o("/pis"),c=o("F56o"),u=o("QiiX"),p=o("M71T"),l=o("dqH4"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_polygon"},e.prototype.onSetup=function(){var t=this.newFeature({type:r.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:r.Constants.geojsonTypes.POLYGON,coordinates:[[]]}});return t.mode=this,this.addFeature(t),this.clearSelectedFeatures(),c.DoubleClickZoom.disable(this),this.updateUIClasses({mouse:r.Constants.cursors.ADD}),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},e.prototype.clickAnywhere=function(t,e){if(t.currentVertexPosition>0&&u.IsEventAtCoordinates.isEvent(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:r.Constants.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},e.prototype.clickOnVertex=function(t){return this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},e.prototype.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),a.CommonSelectors.isVertex(e)&&this.updateUIClasses({mouse:r.Constants.cursors.POINTER})},e.prototype.onTap=function(t,e){return a.CommonSelectors.isVertex(e)?this.clickOnVertex(t):this.clickAnywhere(t,e)},e.prototype.onClick=function(t,e){return this.clickAnywhere(t,e)},e.prototype.onKeyUp=function(t,e){a.CommonSelectors.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{})):a.CommonSelectors.isEnterKey(e)&&this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},e.prototype.onStop=function(t){this.updateUIClasses({mouse:r.Constants.cursors.NONE}),c.DoubleClickZoom.enable(this),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(r.Constants.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{},{silent:!0})))},e.prototype.toDisplayFeatures=function(t,e,o){var n=this._ctx.store.get(e.properties.id).mode;e.geometry.coordinates=n?n.geoJsonOption(e.geometry.coordinates):this.geoJsonOption(e.geometry.coordinates);var i=e.properties.id===t.polygon.id;if(e.properties.active=i?r.Constants.activeStates.ACTIVE:r.Constants.activeStates.INACTIVE,!i)return o(e);if(0!==e.geometry.coordinates.length){var s=e.geometry.coordinates[0].length;if(!(s<3)){if(e.properties.meta=r.Constants.meta.FEATURE,o(p.CreateVertex.create(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),s>3){var a=e.geometry.coordinates[0].length-3;o(p.CreateVertex.create(t.polygon.id,e.geometry.coordinates[0][a],"0."+a,!1))}if(s<=4){var c=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(o({type:r.Constants.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:c,type:r.Constants.geojsonTypes.LINE_STRING}}),3===s)return}return o(e)}}},e.prototype.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{})},e}(s.ModeInterfaceAccessors);e.DrawPolygon=h},"/dta":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_lune"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<3)return t;e.splice(e.length-1,1);var o=new r.PlotUtilsService;if(2===e.length){var n=o.mid(e[0],e[1]),i=o.distance(e[0],n),a=o.getThirdPoint(e[0],n,s.PlotConstants.HALF_PI,i);e.push(a)}var c,u,p=e[0],l=e[1],h=e[2],d=o.getCircleCenterOfThreePoints(p,l,h),f=o.distance(p,d),g=o.getAzimuth(p,d),y=o.getAzimuth(l,d);return o.isClockWise(p,l,h)?(c=y,u=g):(c=g,u=y),(e=o.getArcPoints(d,f,c,u)).push(e[0]),[e]},e.prototype.onClick=function(t,e){this.clickAnywhere(t,e)},e}(o("/bdh").DrawPolygon);e.DrawLune=a},"/nEr":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_circle"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<3)return t;e.splice(e.length-1,1);var o=new r.PlotUtilsService,n=e[0],i=o.distance(n,e[1]);return[this.generatePoints(n,i)]},e.prototype.generatePoints=function(t,e){for(var o,n,i,r=[],a=0;a<=s.PlotConstants.FITTING_COUNT;a++)i=2*Math.PI*a/s.PlotConstants.FITTING_COUNT,o=t[0]+e*Math.cos(i),n=t[1]+e*Math.sin(i),r.push([o,n]);return r},e}(o("/bdh").DrawPolygon);e.DrawCircle=a},"/pis":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.isOfMetaType=function(t){return function(e){var o=e.featureTarget;return!!o&&(!!o.properties&&o.properties.meta===t)}},t.isShiftMousedown=function(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)},t.isActiveFeature=function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===n.Constants.activeStates.ACTIVE&&t.featureTarget.properties.meta===n.Constants.meta.FEATURE))},t.isInactiveFeature=function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===n.Constants.activeStates.INACTIVE&&t.featureTarget.properties.meta===n.Constants.meta.FEATURE))},t.noTarget=function(t){return void 0===t.featureTarget},t.isFeature=function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===n.Constants.meta.FEATURE)},t.isVertex=function(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===n.Constants.meta.VERTEX)},t.isShiftDown=function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},t.isEscapeKey=function(t){return 27===t.keyCode},t.isEnterKey=function(t){return 13===t.keyCode},t}();e.CommonSelectors=i},"0SqO":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("HqoJ"),a=o("dqH4"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.tailWidthFactor=.1,o.swallowTailFactor=1,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o}return i(e,t),e.prototype.getType=function(){return"draw_tailed_squad_combat"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<=3)return t;e.splice(e.length-1,1);var o=new r.PlotUtilsService,n=this.getTailPoints(e,o),i=this.getArrowHeadPoints(e,n[0],n[2],o),s=i[0],a=i[4],c=this.getArrowBodyPoints(e,s,a,this.tailWidthFactor,o),u=c.length,p=[n[0]].concat(c.slice(0,u/2));p.push(s);var l=[n[2]].concat(c.slice(u/2,u));return l.push(a),p=o.getQBSplinePoints(p),l=o.getQBSplinePoints(l),[p.concat(i,l.reverse(),[n[1],p[0]])]},e.prototype.getTailPoints=function(t,e){var o=e.getBaseLength(t)*this.tailWidthFactor,n=e.getThirdPoint(t[1],t[0],a.PlotConstants.HALF_PI,o,!1),i=e.getThirdPoint(t[1],t[0],a.PlotConstants.HALF_PI,o,!0),r=o*this.swallowTailFactor;return[n,e.getThirdPoint(t[1],t[0],0,r,!0),i]},e}(s.DrawAttackArrow);e.DrawTailedSquadCombat=c},"0itJ":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="freehandpolygon",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){this.getPointCount()<2||this.geo.setCoordinates([this.points])},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlFreehandPolygon=n},"17lH":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="marker",this.geo=new ol.geom.Point([0,0]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){var t=this.points[0];this.geo.setCoordinates(t)},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlMarker=n},"1WJV":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("ilPD"),s=o("XvwO"),a=o("/pis"),c=o("QiiX"),u=o("F56o"),p=o("M71T"),l=o("dqH4"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_line_string"},e.prototype.onSetup=function(t){var e,o,n=(t=t||{}).featureId,i="forward";if(n){if(!(e=this.getFeature(n)))throw new Error("Could not find a feature with the provided featureId");var s=t.from;if(s&&"Feature"===s.type&&s.geometry&&"Point"===s.geometry.type&&(s=s.geometry),s&&"Point"===s.type&&s.coordinates&&2===s.coordinates.length&&(s=s.coordinates),!s||!Array.isArray(s))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=e.coordinates.length-1;if(e.coordinates[a][0]===s[0]&&e.coordinates[a][1]===s[1])o=a+1,e.addCoordinate.apply(e,[o].concat(e.coordinates[a]));else{if(e.coordinates[0][0]!==s[0]||e.coordinates[0][1]!==s[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",o=0,e.addCoordinate.apply(e,[o].concat(e.coordinates[0]))}}else o=0,(e=this.newFeature({type:r.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:r.Constants.geojsonTypes.LINE_STRING,coordinates:[]}})).mode=this,this.addFeature(e);return this.clearSelectedFeatures(),u.DoubleClickZoom.disable(this),this.updateUIClasses({mouse:r.Constants.cursors.ADD}),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:o,direction:i}},e.prototype.clickAnywhere=function(t,e){if(t.currentVertexPosition>0&&c.IsEventAtCoordinates.isEvent(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&c.IsEventAtCoordinates.isEvent(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:r.Constants.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},e.prototype.clickOnVertex=function(t){return this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},e.prototype.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),a.CommonSelectors.isVertex(e)&&this.updateUIClasses({mouse:r.Constants.cursors.POINTER})},e.prototype.onTap=function(t,e){if(a.CommonSelectors.isVertex(e))return this.clickOnVertex(t);this.clickAnywhere(t,e)},e.prototype.onClick=function(t,e){this.clickAnywhere(t,e)},e.prototype.onKeyUp=function(t,e){a.CommonSelectors.isEnterKey(e)?this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):a.CommonSelectors.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{}))},e.prototype.onStop=function(t){u.DoubleClickZoom.enable(this),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(r.Constants.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{},{silent:!0})))},e.prototype.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.PlotConstants.modes.SIMPLE_SELECT,{})},e.prototype.toDisplayFeatures=function(t,e,o){var n=e.properties.id===t.line.id;if(e.properties.active=n?r.Constants.activeStates.ACTIVE:r.Constants.activeStates.INACTIVE,!n)return o(e);if(!(e.geometry.coordinates.length<2)){e.properties.meta=r.Constants.meta.FEATURE;var i=this._ctx.store.get(e.properties.id).mode;e.geometry.coordinates=i?i.geoJsonOption(e.geometry.coordinates):this.geoJsonOption(e.geometry.coordinates),o(p.CreateVertex.create(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),o(e)}},e}(s.ModeInterfaceAccessors);e.DrawLineString=h},"1X9b":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="freehandline",this.geo=new ol.geom.LineString([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){this.getPointCount()<2||this.geo.setCoordinates(this.points)},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlFreehandLine=n},"2QQf":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("L8Jp"),i=function(){function t(){}return t.isTap=function(t,e,o){void 0===o&&(o={});var i=null!=o.tolerance?o.tolerance:this.TOLERANCE,r=null!=o.interval?o.interval:this.INTERVAL;return t.point=t.point||e.point,t.time=t.time||e.time,n.EuclideanDistance.distance(t.point,e.point)<i&&e.time-t.time<r},t.TOLERANCE=25,t.INTERVAL=250,t}();e.IsTap=i},"2jCd":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("ilPD"),s=o("XvwO"),a=o("/pis"),c=o("dqH4"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_point"},e.prototype.onSetup=function(t){var e=this.newFeature({type:r.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:r.Constants.geojsonTypes.POINT,coordinates:[]}});return e.mode=this,this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:r.Constants.cursors.ADD}),this.setActionableState({trash:!0}),{point:e}},e.prototype.stopDrawingAndRemove=function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(c.PlotConstants.modes.SIMPLE_SELECT,{})},e.prototype.onTap=function(t,e){this.updateUIClasses({mouse:r.Constants.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(r.Constants.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(c.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},e.prototype.onClick=function(t,e){this.updateUIClasses({mouse:r.Constants.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(r.Constants.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(c.PlotConstants.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},e.prototype.onStop=function(t){t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},e.prototype.toDisplayFeatures=function(t,e,o){var n=e.properties.id===t.point.id;return e.properties.active=n?r.Constants.activeStates.ACTIVE:r.Constants.activeStates.INACTIVE,o(e)},e.prototype.onTrash=function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(c.PlotConstants.modes.SIMPLE_SELECT,{})},e.prototype.onKeyUp=function(t,e){if(a.CommonSelectors.isEscapeKey(e)||a.CommonSelectors.isEnterKey(e))return this.stopDrawingAndRemove(t)},e}(s.ModeInterfaceAccessors);e.DrawPoint=u},"2vKu":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_sector"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<4)return t;e.splice(e.length-1,1);var o=e[0],n=e[1],i=e[2],s=new r.PlotUtilsService,a=s.distance(n,o),c=s.getAzimuth(n,o),u=s.getAzimuth(i,o),p=s.getArcPoints(o,a,c,u);return p.push(o,p[0]),[p]},e.prototype.onClick=function(t,e){this.clickAnywhere(t,e)},e}(o("/bdh").DrawPolygon);e.DrawSector=s},"35jS":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.throttle=function(t,e,o){var n,i;function r(){n=!1,i&&(s.apply(o,i),i=!1)}function s(){n?i=arguments:(n=!0,t.apply(o,arguments),setTimeout(r,e))}return s},t}();e.Throttle=n},"3i3p":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.toDenseArray=function(t){return[].concat(t).filter(function(t){return void 0!==t})},t}();e.ToDenseArray=n},"4CWL":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.type="gatheringplace",this.t=.4,this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){var t=this.getPoints();if(!(t.length<2)){var e;if(2===this.getPointCount()){e=this.pu.mid(t[0],t[1]);var o=this.pu.distance(t[0],e)/.9,i=this.pu.getThirdPoint(t[0],e,n.PlotConstants.HALF_PI,o,!0);t=[t[0],i,t[1]]}e=this.pu.mid(t[0],t[2]),t.push(e,t[0],t[1]);for(var r=[],s=[],a=[],c=0;c<t.length-2;c++){s=t[c],a=t[c+1];var u=t[c+2],p=this.pu.getBisectorNormals(this.t,s,a,u);r=r.concat(p)}var l=r.length;r=[r[l-1]].concat(r.slice(0,l-1));var h=[];for(c=0;c<t.length-2;c++){s=t[c],a=t[c+1],h.push(s);for(var d=0;d<=n.PlotConstants.FITTING_COUNT;d++){i=this.pu.getCubicValue(d/n.PlotConstants.FITTING_COUNT,s,r[2*c],r[2*c+1],a);h.push(i)}h.push(a)}this.geo.setCoordinates([h])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlGatheringPlace=i},"4Ufx":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="polygon",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){this.getPointCount()<2||this.geo.setCoordinates([this.points])},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlPolygon=n},"4jIt":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._stampId=0}return t.prototype.create=function(t,e,o,n){var i=document.createElement(t);return i.className=e||"",n&&(i.id=n),o&&o.appendChild(i),i},t.prototype.createHidden=function(t,e,o){var n=document.createElement(t);return n.style.display="none",o&&(n.id=o),e&&e.appendChild(n),n},t.prototype.remove=function(t,e){e&&t&&e.removeChild(t)},t.prototype.get=function(t){return document.getElementById(t)},t.prototype.getStyle=function(t,e){var o=t.style[e];return"auto"===o?null:o},t.prototype.hasClass=function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},t.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className&&(t.className+=" "),t.className+=e)},t.prototype.removeClass=function(t,e){t.className=this.trim((" "+t.className+" ").replace(" "+e+" "," "))},t.prototype.getDomEventKey=function(t,e,o){return"_p_dom_event_"+t+"_"+this.stamp(e)+(o?"_"+this.stamp(o):"")},t.prototype.addListener=function(t,e,o,n,i){var r=this.getDomEventKey(e,o,n),s=t[r];return s?this:(s=function(e){return o.call(n||t,e)},"addEventListener"in t?t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[r]=s,this)},t.prototype.removeListener=function(t,e,o,n){var i=this.getDomEventKey(e,o,n),r=t[i];return r?("removeEventListener"in t?t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[i]=null,this):this},t.prototype.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},t.prototype.stamp=function(t){var e="_p_id_";return t[e]=t[e]||this._stampId++,t[e]},t}();e.OlDomUtilsService=n},"5U4P":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o){return t.call(this,e,o)||this}return i(e,t),e.prototype.isValid=function(){return this.coordinates.length>1},e.prototype.addCoordinate=function(t,e,o){this.changed();var n=parseInt(t,10);this.coordinates.splice(n,0,[e,o])},e.prototype.getCoordinate=function(t){var e=parseInt(t,10);return this.coordinates[e]},e.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},e.prototype.updateCoordinate=function(t,e,o){var n=parseInt(t,10);this.coordinates[n]=[e,o],this.changed()},e}(o("fMjp").Feature);e.LineString=r},"6q0j":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="sector",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2))if(2===this.getPointCount())this.geo.setCoordinates([this.points]);else{var t=this.getPoints(),e=t[0],o=t[1],n=t[2],i=this.pu.distance(o,e),r=this.pu.getAzimuth(o,e),s=this.pu.getAzimuth(n,e),a=this.pu.getArcPoints(e,i,r,s);a.push(e,a[0]),this.geo.setCoordinates([a])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=3?this.points=e:this.points=[e[0],e[1],e[2]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlSector=n},"75IG":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="rectangle",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=this.points[1],o=Math.min(t[0],e[0]),n=Math.max(t[0],e[0]),i=Math.min(t[1],e[1]),r=Math.max(t[1],e[1]),s=[o,r],a=[n,r],c=[n,i],u=[o,i];this.geo.setCoordinates([[s,a,c,u]])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=2?this.points=e:this.points=[e[0],e[1]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlRectangle=n},"7huL":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.type="circle",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=this.pu.distance(t,this.points[1]);this.geo.setCoordinates([this.generatePoints(t,e)])}},t.prototype.generatePoints=function(t,e){for(var o,i,r,s=[],a=0;a<=n.PlotConstants.FITTING_COUNT;a++)r=2*Math.PI*a/n.PlotConstants.FITTING_COUNT,o=t[0]+e*Math.cos(r),i=t[1]+e*Math.sin(r),s.push([o,i]);return s},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=2?this.points=e:this.points=[e[0],e[1]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlCircle=i},"8Hrj":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.xtend=function(t){for(var e={},o=0;o<t.length;o++){var n=t[o];for(var i in n)Object.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.isEqual=function(t,e){if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var o=0;o<t.length-1;o++){var n=t[o],i=e[o];if(n.x!=i.x||n.y!=i.y)return!1}return!0},t}();e.ObjectCopy=n},"92qF":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.api=t,this.startOpts=e}return t.prototype.start=function(){this.state=this.api.onSetup(this.startOpts),this.state.polygon&&(this.state.polygon.modeWrapper=this),this.state.line&&(this.state.line.modeWrapper=this),this.state.point&&(this.state.point.modeWrapper=this)},t.prototype.stop=function(){this.api.onStop(this.state)},t.prototype.trash=function(){this.api.onTrash(this.state)},t.prototype.combineFeatures=function(){this.api.onCombineFeatures(this.state)},t.prototype.uncombineFeatures=function(){this.api.onUncombineFeatures(this.state)},t.prototype.render=function(t,e){if("select"===this.api.getType())this.api.toDisplayFeatures(this.state,t,e);else{var o=this.api._ctx.store.get(t.properties.id),n=o.mode;if(n){var i=o.modeWrapper;n.toDisplayFeatures(i.state,t,e)}else this.api.toDisplayFeatures(this.state,t,e)}},t.prototype.drag=function(t){this.api.onDrag(this.state,t)},t.prototype.click=function(t){this.api.onClick(this.state,t)},t.prototype.mousemove=function(t){this.api.onMouseMove(this.state,t)},t.prototype.mousedown=function(t){this.api.onMouseDown(this.state,t)},t.prototype.mouseup=function(t){this.api.onMouseUp(this.state,t)},t.prototype.mouseout=function(t){this.api.onMouseOut(this.state)},t.prototype.keyup=function(t){this.api.onKeyUp(this.state,t)},t.prototype.keydown=function(t){this.api.onKeyDown()},t.prototype.touchstart=function(t){this.api.onTouchStart(this.state,t)},t.prototype.touchmove=function(t){this.api.onTouchMove()},t.prototype.touchend=function(t){this.api.onTouchEnd(this.state)},t.prototype.tap=function(t){this.api.onTap(this.state,t)},t}();e.ModeWrapper=n},"9H2K":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("8Hrj"),i=function(){function t(t){this.classTypes=["mode","feature","mouse"],this.currentMapClasses={mode:null,feature:null,mouse:null},this.nextMapClasses={mode:null,feature:null,mouse:null},this.ctx=t}return t.prototype.clearMapClasses=function(){this.queueMapClasses({mode:null,feature:null,mouse:null}),this.updateMapClasses()},t.prototype.queueMapClasses=function(t){this.nextMapClasses=n.ObjectCopy.xtend([this.nextMapClasses,t])},t.prototype.updateMapClasses=function(){var t=this;if(this.ctx.container){var e=[],o=[];this.classTypes.forEach(function(n){t.nextMapClasses[n]!==t.currentMapClasses[n]&&(e.push(n+"-"+t.currentMapClasses[n]),null!==t.nextMapClasses[n]&&o.push(n+"-"+t.nextMapClasses[n]))}),e.length>0&&this.ctx.container.classList.remove.apply(this.ctx.container.classList,e),o.length>0&&this.ctx.container.classList.add.apply(this.ctx.container.classList,o),this.currentMapClasses=n.ObjectCopy.xtend([this.currentMapClasses,this.nextMapClasses])}},t}();e.Ui=i},"9IqW":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o){return t.call(this,e,o)||this}return i(e,t),e.prototype.isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},e.prototype.updateCoordinate=function(t,e,o){3===arguments.length?this.coordinates=[e,o]:this.coordinates=[t,e],this.changed()},e.prototype.getCoordinate=function(){return this.getCoordinates()},e}(o("fMjp").Feature);e.Point=r},"9mG3":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.comparator=function(e,o){var i=t.FEATURE_SORT_RANKS[e.geometry.type]-t.FEATURE_SORT_RANKS[o.geometry.type];return 0===i&&e.geometry.type===n.Constants.geojsonTypes.POLYGON?e.area-o.area:i},t.sortFeatures=function(e){var o=this;return e.map(function(t){return t.geometry.type===n.Constants.geojsonTypes.POLYGON&&(t.area=o.turfService.area(t.geometry)),t}).sort(t.comparator).map(function(t){return delete t.area,t})},t.turfService=new map.TurfService,t.FEATURE_SORT_RANKS={Point:0,LineString:1,Polygon:2},t}();e.SortFeatures=i},CZ9u:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("+swA"),r=function(){function t(){}return t.op=function(t,e){var o=i.FeaturesAt.featuresAtClick(t,null,e),r={mouse:n.Constants.cursors.NONE};return o[0]&&(r.mouse=o[0].properties.active===n.Constants.activeStates.ACTIVE?n.Constants.cursors.MOVE:n.Constants.cursors.POINTER,r.feature=o[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(r.mouse=n.Constants.cursors.ADD),e.ui.queueMapClasses(r),e.ui.updateMapClasses(),o[0]},t}();e.GetFeatureAtAndSetCursors=r},CkyP:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="curve",this.t=.3,this.geo=new ol.geom.LineString([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){var t=this.getPointCount();t<2||(2===t?this.geo.setCoordinates(this.points):this.geo.setCoordinates(this.pu.getCurvePoints(this.t,this.points)))},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlCurve=n},EXYi:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.points=null,this.type="finearrow",this.fixPointCount=0,this.tailWidthFactor=.15,this.neckWidthFactor=.2,this.headWidthFactor=.25,this.headAngle=Math.PI/8.5,this.neckAngle=Math.PI/13,this.geo=new ol.geom.Polygon([]),this.pu=e,this.fixPointCount=2,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.getPoints(),e=t[0],o=t[1],i=this.pu.getBaseLength(t),r=i*this.tailWidthFactor,s=i*this.neckWidthFactor,a=i*this.headWidthFactor,c=this.pu.getThirdPoint(o,e,n.PlotConstants.HALF_PI,r,!0),u=this.pu.getThirdPoint(o,e,n.PlotConstants.HALF_PI,r,!1),p=this.pu.getThirdPoint(e,o,this.headAngle,a,!1),l=this.pu.getThirdPoint(e,o,this.headAngle,a,!0),h=[c,this.pu.getThirdPoint(e,o,this.neckAngle,s,!1),p,o,l,this.pu.getThirdPoint(e,o,this.neckAngle,s,!0),u];this.geo.setCoordinates([h])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlFineArrow=i},Eyi2:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.handler=function(t,e){return t.start(),{render:function(e,o){t.render(e,o)},stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(o){t.drag(o),e.store.render(),e.ui.updateMapClasses()},click:function(o){t.click(o),e.store.render(),e.ui.updateMapClasses()},mousemove:function(o){t.mousemove(o),e.store.render(),e.ui.updateMapClasses()},mousedown:function(o){t.mousedown(o),e.store.render(),e.ui.updateMapClasses()},mouseup:function(o){t.mouseup(o),e.store.render(),e.ui.updateMapClasses()},mouseout:function(o){t.mouseout(o),e.store.render(),e.ui.updateMapClasses()},keydown:function(o){t.keydown(o),e.store.render(),e.ui.updateMapClasses()},keyup:function(o){t.keyup(o),e.store.render(),e.ui.updateMapClasses()},touchstart:function(o){t.touchstart(o),e.store.render(),e.ui.updateMapClasses()},touchmove:function(o){t.touchmove(o),e.store.render(),e.ui.updateMapClasses()},touchend:function(o){t.touchend(o),e.store.render(),e.ui.updateMapClasses()},tap:function(o){t.tap(o),e.store.render(),e.ui.updateMapClasses()}}},t}();e.ModeHandler=n},F56o:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.enable=function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},t.disable=function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)},t}();e.DoubleClickZoom=n},Fa6A:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.mapEventToBoundingBox=function(t,e){return void 0===e&&(e=0),t&&t.point?[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]:null},t}();e.MapEventToBoundingBox=n},FiTb:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="polyline",this.geo=new ol.geom.LineString([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){this.getPointCount()<2||this.geo.setCoordinates(this.points)},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlPolyline=n},FnXg:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("whT9"),r=o("8Hrj"),s=o("9H2K"),a=o("tQ3s"),c=function(){function t(){}return t.get=function(e){var o={onRemove:function(){return e.map.off("load",o.connect),clearInterval(t.mapLoadedInterval),o.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,t.controlContainer&&t.controlContainer.parentNode&&t.controlContainer.parentNode.removeChild(t.controlContainer),t.controlContainer=null,this},connect:function(){e.map.off("load",o.connect),clearInterval(t.mapLoadedInterval),o.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(n){var c=n.fire;n.fire=function(t,e){var o=arguments;return 1===c.length&&1!==arguments.length&&(o=[r.ObjectCopy.xtend([{},{type:t},e])]),c.apply(n,o)},e.map=n;var u=new i.Events(e);return e.events=u.getApi(),e.ui=new s.Ui(e),e.container=n.getContainer(),e.store=new a.Store(e),e.options.boxSelect&&(n.boxZoom.disable(),n.dragPan.disable(),n.dragPan.enable()),n.loaded()?o.connect():(n.on("load",o.connect),t.mapLoadedInterval=setInterval(function(){n.loaded()&&o.connect()},16)),e.events.start(),t.controlContainer},addLayers:function(){e.map.addSource(n.Constants.sources.COLD,{data:{type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(n.Constants.sources.HOT,{data:{type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(function(t){e.map.addLayer(t)}),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach(function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)}),e.map.getSource(n.Constants.sources.COLD)&&e.map.removeSource(n.Constants.sources.COLD),e.map.getSource(n.Constants.sources.HOT)&&e.map.removeSource(n.Constants.sources.HOT)}};return o},t}();e.Setup=c},HqoJ:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.headTailFactor=.8,e}return i(e,t),e.prototype.getType=function(){return"draw_attack_arrow"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<=3)return t;e.splice(e.length-1,1);var o=e[0],n=e[1],i=new r.PlotUtilsService;i.isClockWise(e[0],e[1],e[2])&&(o=e[1],n=e[0]);var s=[i.mid(o,n)].concat(e.slice(2)),a=this.getArrowHeadPoints(s,o,n,i),c=a[0],u=a[4],p=i.distance(o,n)/i.getBaseLength(s),l=this.getArrowBodyPoints(s,c,u,p,i),h=l.length,d=[o].concat(l.slice(0,h/2));d.push(c);var f=[n].concat(l.slice(h/2,h));return f.push(u),d=i.getQBSplinePoints(d),f=i.getQBSplinePoints(f),[d.concat(a,f.reverse())]},e.prototype.getArrowHeadPoints=function(t,e,o,n){var i=n.getBaseLength(t),r=i*this.headHeightFactor,a=t[t.length-1];i=n.distance(a,t[t.length-2]);var c=n.distance(e,o);r>c*this.headTailFactor&&(r=c*this.headTailFactor);var u=r*this.headWidthFactor,p=r*this.neckWidthFactor,l=(r=r>i?i:r)*this.neckHeightFactor,h=n.getThirdPoint(t[t.length-2],a,0,r,!0),d=n.getThirdPoint(t[t.length-2],a,0,l,!0),f=n.getThirdPoint(a,h,s.PlotConstants.HALF_PI,u,!1),g=n.getThirdPoint(a,h,s.PlotConstants.HALF_PI,u,!0);return[n.getThirdPoint(a,d,s.PlotConstants.HALF_PI,p,!1),f,a,g,n.getThirdPoint(a,d,s.PlotConstants.HALF_PI,p,!0)]},e.prototype.getArrowBodyPoints=function(t,e,o,n,i){for(var r=i.wholeDistance(t),s=i.getBaseLength(t)*n,a=(s-i.distance(e,o))/2,c=0,u=[],p=[],l=1;l<t.length-1;l++){var h=i.getAngleOfThreePoints(t[l-1],t[l],t[l+1])/2,d=(s/2-(c+=i.distance(t[l-1],t[l]))/r*a)/Math.sin(h),f=i.getThirdPoint(t[l-1],t[l],Math.PI-h,d,!0),g=i.getThirdPoint(t[l-1],t[l],h,d,!1);u.push(f),p.push(g)}return u.concat(p)},e}(o("/bdh").DrawPolygon);e.DrawAttackArrow=a},Jg3P:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_freehand_line"},e.prototype.geoJsonOption=function(t){return t.length<2?[]:t},e}(o("1WJV").DrawLineString);e.DrawFreehandLine=r},KFD6:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("1WJV"),s=o("j2bS"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_arc"},e.prototype.geoJsonOption=function(t){if(2===t.length)return t;var e=t[0],o=t[1],n=t[2],i=new s.PlotUtilsService,r=i.getCircleCenterOfThreePoints(e,o,n),a=i.distance(e,r),c=i.getAzimuth(e,r),u=i.getAzimuth(o,r),p=void 0,l=void 0;return i.isClockWise(e,o,n)?(p=u,l=c):(p=c,l=u),i.getArcPoints(r,a,p,l)},e}(r.DrawLineString);e.DrawArc=a},KcR1:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.points=null,this.type="arc",this.geo=new ol.geom.LineString([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.geo.setCoordinates(this.points);else{var e=this.points[0],o=this.points[1],n=this.points[2],i=this.pu.getCircleCenterOfThreePoints(e,o,n),r=this.pu.distance(e,i),s=this.pu.getAzimuth(e,i),a=this.pu.getAzimuth(o,i),c=void 0,u=void 0;this.pu.isClockWise(e,o,n)?(c=a,u=s):(c=s,u=a),this.geo.setCoordinates(this.pu.getArcPoints(i,r,c,u))}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=3?this.points=e:this.points=[e[0],e[1],e[2]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlArc=n},L8Jp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.distance=function(t,e){if(t&&e){var o=t.x-e.x,n=t.y-e.y;return Math.sqrt(o*o+n*n)}return 0},t}();e.EuclideanDistance=n},LKjq:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.tailWidthFactor=.1,n.swallowTailFactor=1,n.swallowTailPnt=null,n.type="tailedattackarrow",n.headHeightFactor=.18,n.headWidthFactor=.3,n.neckHeightFactor=.85,n.neckWidthFactor=.15,n.headTailFactor=.8,n.setPoints(e),n}return i(e,t),e.prototype.generate=function(){var e=this.getPointCount();if(!(e<2))if(2!==this.getPointCount()){var o=this.getPoints(),n=o[0],i=o[1];this.pu.isClockWise(o[0],o[1],o[2])&&(n=o[1],i=o[0]);var r=[this.pu.mid(n,i)].concat(o.slice(2)),s=this.getArrowHeadPoints(r,n,i),a=s[0],c=s[4],u=this.pu.distance(n,i),p=this.pu.getBaseLength(r),l=p*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=this.pu.getThirdPoint(r[1],r[0],0,l,!0);var h=u/p,d=this.getArrowBodyPoints(r,a,c,h);e=d.length;var f=[n].concat(d.slice(0,e/2));f.push(a);var g=[i].concat(d.slice(e/2,e));g.push(c),f=this.pu.getQBSplinePoints(f),g=this.pu.getQBSplinePoints(g),t.prototype.setCoordinates.call(this,[f.concat(s,g.reverse(),[this.swallowTailPnt,f[0]])])}else t.prototype.setCoordinates.call(this,[this.points])},e}(o("r5cf").OlAttackArrow);e.OlTailedAttackArrow=r},"Lc+J":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){if(this._length=0,this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,o=t.length;e<o;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}return t.prototype.add=function(t){return this.has(t)?this:(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length,this)},t.prototype.delete=function(t){return!1===this.has(t)?this:(this._length--,delete this._items[t],delete this._nums[t],this)},t.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},t.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach(function(o){e.push({k:o,v:t._items[o]})}),Object.keys(this._nums).forEach(function(o){e.push({k:JSON.parse(o),v:t._nums[o]})}),e.sort(function(t,e){return t.v-e.v}).map(function(t){return t.k})},t.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},t}();e.StringSet=n},Ly2y:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.t=.3,this.type="closedcurve",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.geo.setCoordinates([this.points]);else{var e=this.getPoints();e.push(e[0],e[1]);for(var o=[],i=0;i<e.length-2;i++){var r=this.pu.getBisectorNormals(this.t,e[i],e[i+1],e[i+2]);o=o.concat(r)}var s=o.length;o=[o[s-1]].concat(o.slice(0,s-1));var a=[];for(i=0;i<e.length-2;i++){var c=e[i],u=e[i+1];a.push(c);for(var p=0;p<=n.PlotConstants.FITTING_COUNT;p++){var l=this.pu.getCubicValue(p/n.PlotConstants.FITTING_COUNT,c,o[2*i],o[2*i+1],u);a.push(l)}a.push(u)}this.geo.setCoordinates([a])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlClosedCurve=i},M1oF:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headHeightFactor=.25,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.connPoint=null,e.tempPoint4=null,e}return i(e,t),e.prototype.getType=function(){return"draw_double_arrow"},e.prototype.geoJsonOption=function(t){var e=t[0],o=e.length;if(o<=3)return t;e.splice(e.length-1,1),o--;var n,i,s=new r.PlotUtilsService,a=e[0],c=e[1],u=e[2];this.tempPoint4=3===o?this.getTempPoint4(a,c,u,s):e[3],this.connPoint=3===o||4===o?s.mid(a,c):e[4],s.isClockWise(a,c,u)?(n=this.getArrowPoints(a,this.connPoint,this.tempPoint4,!1,s),i=this.getArrowPoints(this.connPoint,c,u,!0,s)):(n=this.getArrowPoints(c,this.connPoint,u,!1,s),i=this.getArrowPoints(this.connPoint,a,this.tempPoint4,!0,s));var p=n.length,l=(p-5)/2,h=n.slice(0,l),d=n.slice(l,l+5),f=n.slice(l+5,p),g=i.slice(0,l),y=i.slice(l,l+5),v=i.slice(l+5,p);g=s.getBezierPoints(g);var P=s.getBezierPoints(v.concat(h.slice(1)));return f=s.getBezierPoints(f),[g.concat(y,P,d,f)]},e.prototype.getArrowPoints=function(t,e,o,n,i){var r=i.mid(t,e),a=i.distance(r,o),c=i.getThirdPoint(o,r,0,.3*a,!0),u=i.getThirdPoint(o,r,0,.5*a,!0),p=[r,c=i.getThirdPoint(r,c,s.PlotConstants.HALF_PI,a/5,n),u=i.getThirdPoint(r,u,s.PlotConstants.HALF_PI,a/4,n),o],l=this.getArrowHeadPoints(p,[this.headHeightFactor,this.headWidthFactor],[this.neckHeightFactor,this.neckWidthFactor],i),h=l[0],d=l[4],f=i.distance(t,e)/i.getBaseLength(p)/2,g=this.getArrowBodyPoints(p,h,d,f,i),y=g.length,v=g.slice(0,y/2),P=g.slice(y/2,y);return v.push(h),P.push(d),(v=v.reverse()).push(e),(P=P.reverse()).push(t),v.reverse().concat(l,P)},e.prototype.getArrowHeadPoints=function(t,e,o,n){var i=n.getBaseLength(t)*this.headHeightFactor,r=t[t.length-1],a=(n.distance(e,o),i*this.headWidthFactor),c=i*this.neckWidthFactor,u=i*this.neckHeightFactor,p=n.getThirdPoint(t[t.length-2],r,0,i,!0),l=n.getThirdPoint(t[t.length-2],r,0,u,!0),h=n.getThirdPoint(r,p,s.PlotConstants.HALF_PI,a,!1),d=n.getThirdPoint(r,p,s.PlotConstants.HALF_PI,a,!0);return[n.getThirdPoint(r,l,s.PlotConstants.HALF_PI,c,!1),h,r,d,n.getThirdPoint(r,l,s.PlotConstants.HALF_PI,c,!0)]},e.prototype.getArrowBodyPoints=function(t,e,o,n,i){for(var r=i.wholeDistance(t),s=i.getBaseLength(t)*n,a=(s-i.distance(e,o))/2,c=0,u=[],p=[],l=1;l<t.length-1;l++){var h=i.getAngleOfThreePoints(t[l-1],t[l],t[l+1])/2,d=(s/2-(c+=i.distance(t[l-1],t[l]))/r*a)/Math.sin(h),f=i.getThirdPoint(t[l-1],t[l],Math.PI-h,d,!0),g=i.getThirdPoint(t[l-1],t[l],h,d,!1);u.push(f),p.push(g)}return u.concat(p)},e.prototype.getTempPoint4=function(t,e,o,n){var i,r,a,c,u=n.mid(t,e),p=n.distance(u,o),l=n.getAngleOfThreePoints(t,u,o);return l<s.PlotConstants.HALF_PI?(r=p*Math.sin(l),a=p*Math.cos(l),c=n.getThirdPoint(t,u,s.PlotConstants.HALF_PI,r,!1),i=n.getThirdPoint(u,c,s.PlotConstants.HALF_PI,a,!0)):l>=s.PlotConstants.HALF_PI&&l<Math.PI?(r=p*Math.sin(Math.PI-l),a=p*Math.cos(Math.PI-l),c=n.getThirdPoint(t,u,s.PlotConstants.HALF_PI,r,!1),i=n.getThirdPoint(u,c,s.PlotConstants.HALF_PI,a,!1)):l>=Math.PI&&l<1.5*Math.PI?(r=p*Math.sin(l-Math.PI),a=p*Math.cos(l-Math.PI),c=n.getThirdPoint(t,u,s.PlotConstants.HALF_PI,r,!0),i=n.getThirdPoint(u,c,s.PlotConstants.HALF_PI,a,!0)):(r=p*Math.sin(2*Math.PI-l),a=p*Math.cos(2*Math.PI-l),c=n.getThirdPoint(t,u,s.PlotConstants.HALF_PI,r,!0),i=n.getThirdPoint(u,c,s.PlotConstants.HALF_PI,a,!1)),i},e}(o("/bdh").DrawPolygon);e.DrawDoubleArrow=a},M71T:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.create=function(t,e,o,i){return{type:n.Constants.geojsonTypes.FEATURE,properties:{meta:n.Constants.meta.VERTEX,parent:t,coord_path:o,active:i?n.Constants.activeStates.ACTIVE:n.Constants.activeStates.INACTIVE},geometry:{type:n.Constants.geojsonTypes.POINT,coordinates:e}}},t}();e.CreateVertex=i},Q7Tr:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_freehand_polygon"},e.prototype.geoJsonOption=function(t){return t},e}(o("/bdh").DrawPolygon);e.DrawFreehandPolygon=r},QMwO:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.theme=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],t}();e.Theme=n},QiiX:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isEvent=function(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])},t}();e.IsEventAtCoordinates=n},"RD/j":function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t=.3,e}return i(e,t),e.prototype.getType=function(){return"draw_closed_curve"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<=3)return t;e.splice(e.length-1,1),e.push(e[0],e[1]);for(var o=[],n=new r.PlotUtilsService,i=0;i<e.length-2;i++){var a=n.getBisectorNormals(this.t,e[i],e[i+1],e[i+2]);o=o.concat(a)}var c=o.length;o=[o[c-1]].concat(o.slice(0,c-1));var u=[];for(i=0;i<e.length-2;i++){var p=e[i],l=e[i+1];u.push(p);for(var h=0;h<=s.PlotConstants.FITTING_COUNT;h++){var d=n.getCubicValue(h/s.PlotConstants.FITTING_COUNT,p,o[2*i],o[2*i+1],l);u.push(d)}u.push(l)}return[u]},e}(o("/bdh").DrawPolygon);e.DrawClosedCurve=a},Re0c:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=function(t){function e(e){var o=t.call(this,e)||this;return o.tailWidthFactor=.1,o.swallowTailFactor=1,o.swallowTailPnt=null,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.headTailFactor=.8,o}return i(e,t),e.prototype.getType=function(){return"draw_tailed_attack_arrow"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<=3)return t;e.splice(e.length-1,1);var o=e[0],n=e[1],i=new r.PlotUtilsService;i.isClockWise(e[0],e[1],e[2])&&(o=e[1],n=e[0]);var s=[i.mid(o,n)].concat(e.slice(2)),a=this.getArrowHeadPoints(s,o,n,i),c=a[0],u=a[4],p=i.distance(o,n),l=i.getBaseLength(s),h=l*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=i.getThirdPoint(s[1],s[0],0,h,!0);var d=p/l,f=this.getArrowBodyPoints(s,c,u,d,i),g=f.length,y=[o].concat(f.slice(0,g/2));y.push(c);var v=[n].concat(f.slice(g/2,g));return v.push(u),y=i.getQBSplinePoints(y),v=i.getQBSplinePoints(v),[y.concat(a,v.reverse(),[this.swallowTailPnt,y[0]])]},e}(o("HqoJ").DrawAttackArrow);e.DrawTailedAttackArrow=s},Rwv5:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=o("j2bS"),r=o("zAV1"),s=function(){function t(){this.points=null,this.plot=null,this.feature=null,this.plotType=null,this.dblClickZoomInteraction=null,this.style=null,this.featureSource=null,this.drawOverlay=null,this.map=null,this.onDrawEnd=null,this.pf=new r.OlPlotFactoryService,this.pu=new i.PlotUtilsService}return t.prototype.init=function(t,e){var o=new ol.style.Stroke({color:"#000000",width:1.25}),n=new ol.style.Fill({color:"rgba(0,0,0,0.4)"});this.style=new ol.style.Style({fill:n,stroke:o}),this.featureSource=new ol.source.Vector,this.drawOverlay=new ol.layer.Vector({source:this.featureSource}),this.drawOverlay.setStyle(this.style),this.map=t,this.onDrawEnd=e},t.prototype.activate=function(t,e){var o=this;this.deactivate(),this.deactivateMapTools(),this.firstClickFunction=function(t){o.mapFirstClickHandler(t,o)},this.map.on("click",this.firstClickFunction,this),this.plotType=t,this.map.addLayer(this.drawOverlay)},t.prototype.deactivate=function(){this.disconnectEventHandlers(this),this.map.removeLayer(this.drawOverlay),this.featureSource.clear(),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.activateMapTools()},t.prototype.isDrawing=function(){return null!=this.plotType},t.prototype.mapFirstClickHandler=function(t,e){e.points.push(t.coordinate),e.plot=e.pf.createPlot(e.plotType,e.points),e.feature=new ol.Feature(e.plot.getGeo()),e.featureSource.addFeature(e.feature),e.map.un("click",e.firstClickFunction,e),e.plot.fixPointCount!==e.plot.getPointCount()?(e.nextClickFunction=function(t){e.mapNextClickHandler(t,e)},e.map.on("click",e.nextClickFunction,e),e.plot.freehand||(e.mapDoubleClickFunction=function(t){e.mapDoubleClickHandler(t,e)},e.map.on("dblclick",e.mapDoubleClickFunction,e)),e.mapMouseMoveFunction=function(t){e.mapMouseMoveHandler(t,e)},e.map.on("pointermove",e.mapMouseMoveFunction,e)):e.mapDoubleClickHandler(t,e)},t.prototype.mapMouseMoveHandler=function(t,e){var o=t.pixel,i=e.map.getCoordinateFromPixel(o);if(!(e.pu.distance(i,e.points[e.points.length-1])<n.PlotConstants.ZERO_TOLERANCE))if(e.plot.freehand)e.points.push(i),e.plot.setPoints(e.points);else{var r=e.points.concat([i]);e.plot.setPoints(r)}},t.prototype.mapNextClickHandler=function(t,e){!e.plot.freehand&&e.pu.distance(t.coordinate,e.points[e.points.length-1])<n.PlotConstants.ZERO_TOLERANCE||(e.points.push(t.coordinate),e.plot.setPoints(e.points),e.plot.fixPointCount!==e.plot.getPointCount()?e.plot&&e.plot.freehand&&e.mapDoubleClickHandler(t,e):e.mapDoubleClickHandler(t,e))},t.prototype.mapDoubleClickHandler=function(t,e){e.disconnectEventHandlers(e),e.plot.finishDrawing(),t.preventDefault(),e.drawEnd()},t.prototype.disconnectEventHandlers=function(t){t.map.un("click",t.firstClickFunction,t),t.map.un("click",t.nextClickFunction,t),t.map.un("pointermove",t.mapMouseMoveFunction,t),t.map.un("dblclick",t.mapDoubleClickFunction,t)},t.prototype.drawEnd=function(){this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(this),this.map.removeOverlay(this.drawOverlay),this.onDrawEnd(this.feature),this.points=[],this.plot=null,this.plotType=null,this.feature=null},t.prototype.deactivateMapTools=function(){for(var t=this.map.getInteractions(),e=t.getLength(),o=0;o<e;o++){var n=t.item(o);if(n instanceof ol.interaction.DoubleClickZoom){this.dblClickZoomInteraction=n,t.remove(n);break}}},t.prototype.activateMapTools=function(){null!=this.dblClickZoomInteraction&&(this.map.getInteractions().push(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)},t}();e.OlPlotDrawService=s},S8cF:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="assaultdirection",n.tailWidthFactor=.2,n.neckWidthFactor=.25,n.headWidthFactor=.3,n.headAngle=Math.PI/4,n.neckAngle=.17741*Math.PI,n.setPoints(e),n}return i(e,t),e}(o("EXYi").OlFineArrow);e.OlAssaultDirection=r},SOr2:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("ilPD"),s=o("XvwO"),a=o("/pis"),c=o("bhkv"),u=o("VVt0"),p=o("F56o"),l=o("xXm1"),h=o("dqH4"),d=a.CommonSelectors.isOfMetaType(r.Constants.meta.VERTEX),f=a.CommonSelectors.isOfMetaType(r.Constants.meta.MIDPOINT),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.fireUpdate=function(){this.map.fire(r.Constants.events.UPDATE,{action:r.Constants.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(function(t){return t.toGeoJSON()})})},e.prototype.fireActionable=function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},e.prototype.startDragging=function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},e.prototype.stopDragging=function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},e.prototype.onVertex=function(t,e){this.startDragging(t,e);var o=e.featureTarget.properties,n=t.selectedCoordPaths.indexOf(o.coord_path);a.CommonSelectors.isShiftDown(e)||-1!==n?a.CommonSelectors.isShiftDown(e)&&-1===n&&t.selectedCoordPaths.push(o.coord_path):t.selectedCoordPaths=[o.coord_path];var i=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(i)},e.prototype.onMidpoint=function(t,e){this.startDragging(t,e);var o=e.featureTarget.properties;t.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),t.selectedCoordPaths=[o.coord_path]},e.prototype.pathsToCoordinates=function(t,e){return e.map(function(e){return{feature_id:t,coord_path:e}})},e.prototype.onFeature=function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},e.prototype.dragFeature=function(t,e,o){l.MoveFeatures.move(this.getSelected(),o),t.dragMoveLocation=e.lngLat},e.prototype.dragVertex=function(t,e,o){for(var n=t.selectedCoordPaths.map(function(e){return t.feature.getCoordinate(e)}),i=n.map(function(t){return{type:r.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:r.Constants.geojsonTypes.POINT,coordinates:t}}}),s=u.ConstrainFeatureMovement.constrain(i,o),a=0;a<n.length;a++){var c=n[a];t.feature.updateCoordinate(t.selectedCoordPaths[a],c[0]+s.lng,c[1]+s.lat)}},e.prototype.clickNoTarget=function(t){this.changeMode(h.PlotConstants.modes.SIMPLE_SELECT)},e.prototype.clickInactive=function(t){this.changeMode(h.PlotConstants.modes.SIMPLE_SELECT)},e.prototype.clickActiveFeature=function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},e.prototype.onSetup=function(t){var e=t.featureId,o=this.getFeature(e);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===r.Constants.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:e,feature:o,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,n.selectedCoordPaths)),this.setSelected(e),p.DoubleClickZoom.disable(this),this.setActionableState({trash:!0}),n},e.prototype.onStop=function(){p.DoubleClickZoom.enable(this),this.clearSelectedCoordinates()},e.prototype.toDisplayFeatures=function(t,e,o){var n=this._ctx.store.get(e.properties.id).mode;t.featureId===e.properties.id?(e.properties.active=r.Constants.activeStates.ACTIVE,c.CreateSupplementaryPoints.create(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(o),n&&(e.geometry.coordinates=n.geoJsonOption(e.geometry.coordinates)),o(e)):(e.properties.active=r.Constants.activeStates.INACTIVE,n&&(e.geometry.coordinates=n.geoJsonOption(e.geometry.coordinates)),o(e)),this.fireActionable(t)},e.prototype.onTrash=function(t){t.selectedCoordPaths.sort().reverse().forEach(function(e){return t.feature.removeCoordinate(e)}),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(h.PlotConstants.modes.SIMPLE_SELECT))},e.prototype.onMouseMove=function(t,e){var o=a.CommonSelectors.isActiveFeature(e),n=d(e),i=0===t.selectedCoordPaths.length;o&&i?this.updateUIClasses({mouse:r.Constants.cursors.MOVE}):n&&!i?this.updateUIClasses({mouse:r.Constants.cursors.MOVE}):this.updateUIClasses({mouse:r.Constants.cursors.NONE}),this.stopDragging(t)},e.prototype.onMouseOut=function(t){t.dragMoving&&this.fireUpdate()},e.prototype.onTouchStart=function(t,e){return d(e)?this.onVertex(t,e):a.CommonSelectors.isActiveFeature(e)?this.onFeature(t,e):f(e)?this.onMidpoint(t,e):void 0},e.prototype.onMouseDown=function(t,e){return d(e)?this.onVertex(t,e):a.CommonSelectors.isActiveFeature(e)?this.onFeature(t,e):f(e)?this.onMidpoint(t,e):void 0},e.prototype.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,o):this.dragFeature(t,e,o),t.dragMoveLocation=e.lngLat}},e.prototype.onClick=function(t,e){return a.CommonSelectors.noTarget(e)?this.clickNoTarget(t):a.CommonSelectors.isActiveFeature(e)?this.clickActiveFeature(t):a.CommonSelectors.isInactiveFeature(e)?this.clickInactive(t):void this.stopDragging(t)},e.prototype.onTap=function(t,e){return a.CommonSelectors.noTarget(e)?this.clickNoTarget(t):a.CommonSelectors.isActiveFeature(e)?this.clickActiveFeature(t):a.CommonSelectors.isInactiveFeature(e)?this.clickInactive(t):void 0},e.prototype.onTouchEnd=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)},e.prototype.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)},e.prototype.getType=function(){return"select"},e}(s.ModeInterfaceAccessors);e.DirectSelect=g},TD8o:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("okug"),i=o("p4gN"),r=function(){function t(t,e){this.ol=new n.OlPlotService,this.mb=new i.MbPlotService,this.mapObj=t,this.constants={},this.constants[map.MapConstants.Map2DType.OL]=this.ol,this.constants[map.MapConstants.Map2DType.MapboxGl]=this.mb;var o=this.mapObj.getMapType();this.constants[o].init(this.mapObj.getMap(),e)}return t.prototype.draw=function(t,e){var o=this.mapObj.getMapType();this.constants[o].draw(t,e)},t.prototype.delete=function(){var t=this.mapObj.getMapType();this.constants[t].delete()},t.prototype.output=function(){var t=this.mapObj.getMapType();this.constants[t].output()},t.prototype.input=function(t){var e=this.mapObj.getMapType();this.constants[e].input(t)},t}();e.PlottingService=r},TrCf:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("4jIt"),i=function(){function t(){this.activePlot=null,this.map=null,this.mapViewport=null,this.startPoint=null,this.ghostControlPoints=null,this.controlPoints=null,this.activeControlPointId=null,this.mouseOver=!1,this.elementTable={},this.mapDragPan=null,this.Constants={HELPER_HIDDEN_DIV:"p-helper-hidden-div",HELPER_CONTROL_POINT_DIV:"p-helper-control-point-div"},this.dus=new n.OlDomUtilsService}return t.prototype.init=function(t){t&&(this.map=t,this.mapViewport=this.map.getViewport())},t.prototype.activate=function(t){if(t&&t instanceof ol.Feature&&(t=t.getGeometry().plot)!==this.activePlot&&t.isPlot()){this.deactivate(),this.activePlot=t;var e=this;this.plotMouseOverOutHandlerEx=function(t){e.plotMouseOverOutHandler(t,e)},this.map.on("pointermove",this.plotMouseOverOutHandlerEx,this),this.initHelperDom(),this.initControlPoints()}},t.prototype.initHelperDom=function(){if(this.map&&this.activePlot){var t=this.getMapParentElement();if(t)for(var e=this.dus.createHidden("div",t,this.Constants.HELPER_HIDDEN_DIV),o=this.getControlPoints(),n=0;n<o.length;n++){var i=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+n;this.dus.create("div",this.Constants.HELPER_CONTROL_POINT_DIV,e,i),this.elementTable[i]=n}}},t.prototype.getMapParentElement=function(){var t=this.map.getTargetElement();if(t)return t.parentNode},t.prototype.destroyHelperDom=function(){if(this.controlPoints){for(var t=0;t<this.controlPoints.length;t++){this.map.removeOverlay(this.controlPoints[t]);var e=this.dus.get(this.Constants.HELPER_CONTROL_POINT_DIV+"-"+t);e&&(this.dus.removeListener(e,"mousedown",this.controlPointMouseDownHandler,this),this.dus.removeListener(e,"mousemove",this.controlPointMouseMoveHandler2,this))}this.controlPoints=null}var o=this.getMapParentElement(),n=this.dus.get(this.Constants.HELPER_HIDDEN_DIV);n&&o&&this.dus.remove(n,o)},t.prototype.initControlPoints=function(){if(this.map){this.controlPoints=[];for(var t=this.getControlPoints(),e=0;e<t.length;e++){var o=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+e,n=this.dus.get(o),i=new ol.Overlay({id:o,position:t[e],positioning:"center-center",element:n});this.controlPoints.push(i),this.map.addOverlay(i),this.dus.addListener(n,"mousedown",this.controlPointMouseDownHandler,this),this.dus.addListener(n,"mousemove",this.controlPointMouseMoveHandler2,this)}}},t.prototype.controlPointMouseMoveHandler2=function(t){t.stopImmediatePropagation()},t.prototype.controlPointMouseDownHandler=function(t){var e=t.target.id;this.activeControlPointId=e;var o=this;this.mapViewport.onmousemove=function(t){o.controlPointMouseMoveHandler(t,o)},this.mapViewport.onmouseup=function(t){o.controlPointMouseUpHandler(t,o)}},t.prototype.controlPointMouseMoveHandler=function(t,e){var o=e.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(e.activeControlPointId){var n=e.activePlot,i=e.elementTable[e.activeControlPointId];n.updatePoint(o,i),e.map.getOverlayById(e.activeControlPointId).setPosition(o)}},t.prototype.controlPointMouseUpHandler=function(t,e){e.mapViewport.onmousemove=null,e.mapViewport.onmouseup=null},t.prototype.getControlPoints=function(){return this.activePlot?this.activePlot.getPoints():[]},t.prototype.plotMouseOverOutHandler=function(t,e){var o=e.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});o&&o.getGeometry().plot===e.activePlot?e.mouseOver||(e.mouseOver=!0,e.map.getViewport().style.cursor="move",e.plotMouseDownHandlerEx=function(t){e.plotMouseDownHandler(t,e)},e.map.on("pointerdown",e.plotMouseDownHandlerEx,this)):e.mouseOver&&(e.mouseOver=!1,e.map.getViewport().style.cursor="default",e.map.un("pointerdown",e.plotMouseDownHandlerEx,this))},t.prototype.plotMouseDownHandler=function(t,e){e.ghostControlPoints=e.getControlPoints(),e.startPoint=t.coordinate,e.disableMapDragPan(),e.plotMouseUpHandlerEx=function(t){e.plotMouseUpHandler(t,e)},e.map.on("pointerup",e.plotMouseUpHandlerEx,this),e.plotMouseMoveHandlerEx=function(t){e.plotMouseMoveHandler(t,e)},e.map.on("pointerdrag",e.plotMouseMoveHandlerEx,this)},t.prototype.plotMouseMoveHandler=function(t,e){if(null!=e.startPoint){for(var o=t.coordinate,n=o[0]-e.startPoint[0],i=o[1]-e.startPoint[1],r=[],s=0;s<e.ghostControlPoints.length;s++){var a=e.ghostControlPoints[s],c=[a[0]+n,a[1]+i];r.push(c);var u=e.Constants.HELPER_CONTROL_POINT_DIV+"-"+s,p=e.map.getOverlayById(u);p.setPosition(c),p.setPositioning("center-center")}e.activePlot.setPoints(r)}},t.prototype.plotMouseUpHandler=function(t,e){e.enableMapDragPan(),e.map.un("pointerup",e.plotMouseUpHandlerEx,this),e.map.un("pointerdrag",e.plotMouseMoveHandlerEx,this)},t.prototype.disconnectEventHandlers=function(){this.map.un("pointermove",this.plotMouseOverOutHandlerEx),this.mapViewport.unmousemove=null,this.mapViewport.unmouseup=null,this.map.un("pointerdown",this.plotMouseDownHandlerEx,this),this.map.un("pointerup",this.plotMouseUpHandlerEx,this),this.map.un("pointerdrag",this.plotMouseMoveHandlerEx,this)},t.prototype.deactivate=function(){this.activePlot=null,this.mouseOver=!1,this.destroyHelperDom(),this.disconnectEventHandlers(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null},t.prototype.disableMapDragPan=function(){for(var t=this.map.getInteractions(),e=t.getLength(),o=0;o<e;o++){var n=t.item(o);if(n instanceof ol.interaction.DragPan){this.mapDragPan=n,n.setActive(!1);break}}},t.prototype.enableMapDragPan=function(){null!=this.mapDragPan&&(this.mapDragPan.setActive(!0),this.mapDragPan=null)},t}();e.OlPlotEditService=i},V42L:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.type="lune",this.fixPointCount=3,this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.getPoints();if(2===this.getPointCount()){var e=this.pu.mid(t[0],t[1]),o=this.pu.distance(t[0],e),i=this.pu.getThirdPoint(t[0],e,n.PlotConstants.HALF_PI,o);t.push(i)}var r,s,a=t[0],c=t[1],u=t[2],p=this.pu.getCircleCenterOfThreePoints(a,c,u),l=this.pu.distance(a,p),h=this.pu.getAzimuth(a,p),d=this.pu.getAzimuth(c,p);this.pu.isClockWise(a,c,u)?(r=d,s=h):(r=h,s=d),(t=this.pu.getArcPoints(p,l,r,s)).push(t[0]),this.geo.setCoordinates([t])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=2?this.points=e:this.points=[e[0],e[1]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlLune=i},VVt0:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.constrain=function(t,e){var o=n.Constants.LAT_MIN,i=n.Constants.LAT_MAX,r=n.Constants.LAT_MIN,s=n.Constants.LAT_MAX,a=n.Constants.LNG_MAX,c=n.Constants.LNG_MIN,u=new map.GeojsonUtilService;t.forEach(function(t){var e=u.getGeojsonBoundingBox(t),n=e[1],p=e[3],l=e[0],h=e[2];n>o&&(o=n),p<i&&(i=p),p>r&&(r=p),n<s&&(s=n),l<a&&(a=l),h>c&&(c=h)});var p=e;return o+p.lat>n.Constants.LAT_RENDERED_MAX&&(p.lat=n.Constants.LAT_RENDERED_MAX-o),r+p.lat>n.Constants.LAT_MAX&&(p.lat=n.Constants.LAT_MAX-r),i+p.lat<n.Constants.LAT_RENDERED_MIN&&(p.lat=n.Constants.LAT_RENDERED_MIN-i),s+p.lat<n.Constants.LAT_MIN&&(p.lat=n.Constants.LAT_MIN-s),a+p.lng<=n.Constants.LNG_MIN&&(p.lng+=360*Math.ceil(Math.abs(p.lng)/360)),c+p.lng>=n.Constants.LNG_MAX&&(p.lng-=360*Math.ceil(Math.abs(p.lng)/360)),p},t}();e.ConstrainFeatureMovement=i},W2UG:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t=.4,e}return i(e,t),e.prototype.getType=function(){return"draw_gathering_place"},e.prototype.geoJsonOption=function(t){var e,o=t[0];if(o.length<3)return t;o.splice(o.length-1,1);var n=new r.PlotUtilsService;if(2===o.length){e=n.mid(o[0],o[1]);var i=n.distance(o[0],e)/.9,a=n.getThirdPoint(o[0],e,s.PlotConstants.HALF_PI,i,!0);o=[o[0],a,o[1]]}e=n.mid(o[0],o[2]),o.push(e,o[0],o[1]);for(var c=[],u=[],p=[],l=0;l<o.length-2;l++){u=o[l],p=o[l+1];var h=o[l+2],d=n.getBisectorNormals(this.t,u,p,h);c=c.concat(d)}var f=c.length;c=[c[f-1]].concat(c.slice(0,f-1));var g=[];for(l=0;l<o.length-2;l++){u=o[l],p=o[l+1],g.push(u);for(var y=0;y<=s.PlotConstants.FITTING_COUNT;y++){a=n.getCubicValue(y/s.PlotConstants.FITTING_COUNT,u,c[2*l],c[2*l+1],p);g.push(a)}g.push(p)}return[g]},e}(o("/bdh").DrawPolygon);e.DrawGatheringPlace=a},XhbY:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o("qf1g"),function(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}(o("TD8o"))},XvwO:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("+swA"),r=o("9IqW"),s=o("5U4P"),a=o("nmUL"),c=o("jQIs"),u=function(){function t(t){this.map=t.map,this.drawConfig=t.options,this._ctx=t}return t.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},t.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce(function(t,o){return void 0===t[o.feature_id]&&(t[o.feature_id]=!0,e._ctx.store.get(o.feature_id).changed()),t},{})},t.prototype.getSelected=function(){return this._ctx.store.getSelected()},t.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},t.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},t.prototype.getFeature=function(t){return this._ctx.store.get(t)},t.prototype.select=function(t){return this._ctx.store.select(t)},t.prototype.deselect=function(t){return this._ctx.store.deselect(t)},t.prototype.deleteFeature=function(t,e){return void 0===e&&(e={}),this._ctx.store.delete(t,e)},t.prototype.addFeature=function(t){return this._ctx.store.add(t)},t.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},t.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},t.prototype.setActionableState=function(t){void 0===t&&(t={});var e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},t.prototype.changeMode=function(t,e,o){return void 0===e&&(e={}),void 0===o&&(o={}),this._ctx.events.changeMode(t,e,o)},t.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},t.prototype.featuresAt=function(t,e,o){if(void 0===o&&(o="click"),"click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return"click"===o?i.FeaturesAt.featuresAtClick(t,e,this._ctx):i.FeaturesAt.featuresAtTouch(t,e,this._ctx)},t.prototype.newFeature=function(t){var e=t.geometry.type;return e===n.Constants.geojsonTypes.POINT?new r.Point(this._ctx,t):e===n.Constants.geojsonTypes.LINE_STRING?new s.LineString(this._ctx,t):e===n.Constants.geojsonTypes.POLYGON?new a.Polygon(this._ctx,t):new c.MultiFeature(this._ctx,t)},t.prototype.isInstanceOf=function(t,e){if(t===n.Constants.geojsonTypes.POINT)return e instanceof r.Point;if(t===n.Constants.geojsonTypes.LINE_STRING)return e instanceof s.LineString;if(t===n.Constants.geojsonTypes.POLYGON)return e instanceof a.Polygon;if("MultiFeature"===t)return e instanceof c.MultiFeature;throw new Error("Unknown feature class: "+t)},t.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)},t.prototype.onSetup=function(t){},t.prototype.onDrag=function(t,e){},t.prototype.onClick=function(t,e){},t.prototype.onMouseMove=function(t,e){},t.prototype.onMouseDown=function(t,e){},t.prototype.onMouseUp=function(t,e){},t.prototype.onMouseOut=function(t){},t.prototype.onKeyUp=function(t,e){},t.prototype.onKeyDown=function(){},t.prototype.onTouchStart=function(t,e){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(t){},t.prototype.onTap=function(t,e){},t.prototype.onStop=function(t){},t.prototype.onTrash=function(t){},t.prototype.onCombineFeature=function(){},t.prototype.onUncombineFeature=function(){},t.prototype.toDisplayFeatures=function(t,e,o){},t.prototype.onCombineFeatures=function(t){},t.prototype.onUncombineFeatures=function(t){},t.prototype.geoJsonOption=function(t){return t},t.prototype.getType=function(){return"draw"},t}();e.ModeInterfaceAccessors=u},XxFY:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.hat=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(e),n=2;o===1/0;n*=2)o=Math.log(Math.pow(2,t/n))/Math.log(e)*n;var i=o-Math.floor(o),r="";for(n=0;n<Math.floor(o);n++){r=Math.floor(Math.random()*e).toString(e)+r}if(i){var s=Math.pow(e,i);r=Math.floor(Math.random()*s).toString(e)+r}var a=parseInt(r,e);return a!==1/0&&a>=Math.pow(2,t)?this.hat(t,e):r},t}();e.Hat=n},ayIp:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var o=t.call(this,e)||this;return o.tailWidthFactor=.1,o.neckWidthFactor=.15,o.headWidthFactor=.2,o.headAngle=Math.PI/4,o.neckAngle=.17741*Math.PI,o}return i(e,t),e.prototype.getType=function(){return"draw_assault_direction"},e}(o("b1V8").DrawFineArrow);e.DrawAssaultDirection=r},b1V8:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fixPointCount=0,e.tailWidthFactor=.15,e.neckWidthFactor=.2,e.headWidthFactor=.25,e.headAngle=Math.PI/8.5,e.neckAngle=Math.PI/13,e}return i(e,t),e.prototype.getType=function(){return"draw_fine_arrow"},e.prototype.geoJsonOption=function(t){if(t.length<=0)return t;var e=t[0];if(e.length<2)return t;var o=e[0],n=e[1],i=new r.PlotUtilsService,a=i.getBaseLength(e),c=a*this.tailWidthFactor,u=a*this.neckWidthFactor,p=a*this.headWidthFactor,l=i.getThirdPoint(n,o,s.PlotConstants.HALF_PI,c,!0),h=i.getThirdPoint(n,o,s.PlotConstants.HALF_PI,c,!1),d=i.getThirdPoint(o,n,this.headAngle,p,!1),f=i.getThirdPoint(o,n,this.headAngle,p,!0);return[[l,i.getThirdPoint(o,n,this.neckAngle,u,!1),d,n,f,i.getThirdPoint(o,n,this.neckAngle,u,!0),h]]},e}(o("/bdh").DrawPolygon);e.DrawFineArrow=a},bhkv:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("M71T"),r=o("kUrg"),s=function(){function t(){}return t.create=function(e,o,s){void 0===o&&(o={}),void 0===s&&(s=null);var a,c=e.geometry,u=c.type,p=c.coordinates,l=e.properties&&e.properties.id,h=[];function d(t,e){var n="",s=null;t.forEach(function(t,a){var c=null!=e?e+"."+a:String(a),u=i.CreateVertex.create(l,t,c,f(c));if(o.midpoints&&s){var p=r.CreateMidpoint.create(l,s,u,o.map);p&&h.push(p)}s=u;var d=JSON.stringify(t);n!==d&&h.push(u),0===a&&(n=d)})}function f(t){return!!o.selectedPaths&&-1!==o.selectedPaths.indexOf(t)}return u===n.Constants.geojsonTypes.POINT?h.push(i.CreateVertex.create(l,p,s,f(s))):u===n.Constants.geojsonTypes.POLYGON?p.forEach(function(t,e){d(t,null!==s?s+"."+e:String(e))}):u===n.Constants.geojsonTypes.LINE_STRING?d(p,s):0===u.indexOf(n.Constants.geojsonTypes.MULTI_PREFIX)&&(a=u.replace(n.Constants.geojsonTypes.MULTI_PREFIX,""),p.forEach(function(i,r){var s={type:n.Constants.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:a,coordinates:i}};h=h.concat(t.create(s,o,r))})),h},t}();e.CreateSupplementaryPoints=s},dqH4:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.TWO_PI=2*Math.PI,t.HALF_PI=Math.PI/2,t.FITTING_COUNT=100,t.ZERO_TOLERANCE=1e-4,t.modes={SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static",DRAW_ARC:"draw_arc",DRAW_ASSAULT_DIRECTION:"draw_assault_direction",DRAW_ATTACK_ARROW:"draw_attack_arrow",DRAW_CIRCLE:"draw_circle",DRAW_CLOSED_CURVE:"draw_closed_curve",DRAW_CURVE:"draw_curve",DRAW_DOUBLE_ARROW:"draw_double_arrow",DRAW_ELLIPSE:"draw_ellipse",DRAW_FINE_ARROW:"draw_fine_arrow",DRAW_FREEHAND_LINE:"draw_freehand_line",DRAW_FREEHAND_POLYGON:"draw_freehand_polygon",DRAW_Gathering_PLACE:"draw_gathering_place",DRAW_LINE_STRING:"draw_line_string",DRAW_LUNE:"draw_lune",DRAW_POINT:"draw_point",DRAW_POLYGON:"draw_polygon",DRAW_RECTANGLE:"draw_rectangle",DRAW_SECTOR:"draw_sector",DRAW_SQUAD_COMBAT:"draw_squad_combat",DRAW_STRAIGHT_ARROW:"draw_straight_arrow",DRAW_TAILED_ATTACK_ARROW:"draw_tailed_attack_arrow",DRAW_TAILED_SQUAD_COMBAT:"draw_tailed_squad_combat"},t}();e.PlotConstants=n},fMjp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("XxFY"),r=function(){function t(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||i.Hat.hat(),this.type=e.geometry.type}return t.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},t.prototype.incomingCoords=function(t){this.setCoordinates(t)},t.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},t.prototype.getCoordinates=function(){return this.coordinates},t.prototype.setProperty=function(t,e){this.properties[t]=e},t.prototype.toGeoJSON=function(){return{id:this.id,type:n.Constants.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}},t.prototype.internal=function(t){var e={id:this.id,meta:n.Constants.meta.FEATURE,"meta:type":this.type,active:n.Constants.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var o in this.properties)e["user_"+o]=this.properties[o];return{type:n.Constants.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},t}();e.Feature=r},fYdq:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("HqoJ"),a=o("dqH4"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.tailWidthFactor=.1,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o}return i(e,t),e.prototype.getType=function(){return"draw_squad_combat"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<=3)return t;e.splice(e.length-1,1);var o=new r.PlotUtilsService,n=this.getTailPoints(e,o),i=this.getArrowHeadPoints(e,n[0],n[1],o),s=i[0],a=i[4],c=this.getArrowBodyPoints(e,s,a,this.tailWidthFactor,o),u=c.length,p=[n[0]].concat(c.slice(0,u/2));p.push(s);var l=[n[1]].concat(c.slice(u/2,u));return l.push(a),p=o.getQBSplinePoints(p),l=o.getQBSplinePoints(l),[p.concat(i,l.reverse())]},e.prototype.getTailPoints=function(t,e){var o=e.getBaseLength(t)*this.tailWidthFactor;return[e.getThirdPoint(t[1],t[0],a.PlotConstants.HALF_PI,o,!1),e.getThirdPoint(t[1],t[0],a.PlotConstants.HALF_PI,o,!0)]},e}(s.DrawAttackArrow);e.DrawSquadCombat=c},hiBp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.mouseEventPoint=function(t,e){var o=e.getBoundingClientRect();return new mapboxgl.Point(t.clientX-o.left-(e.clientLeft||0),t.clientY-o.top-(e.clientTop||0))},t}();e.MouseEventPoint=n},ilG6:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.type="ellipse",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=this.points[1],o=this.pu.mid(t,e),n=Math.abs((t[0]-e[0])/2),i=Math.abs((t[1]-e[1])/2);this.geo.setCoordinates([this.generatePoints(o,n,i)])}},t.prototype.generatePoints=function(t,e,o){for(var i,r,s,a=[],c=0;c<=n.PlotConstants.FITTING_COUNT;c++)s=2*Math.PI*c/n.PlotConstants.FITTING_COUNT,i=t[0]+e*Math.cos(s),r=t[1]+o*Math.sin(s),a.push([i,r]);return a},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=2?this.points=e:this.points=[e[0],e[1]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlEllipse=i},ilPD:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.classes={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},t.sources={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},t.cursors={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},t.types={POLYGON:"polygon",LINE:"line_string",POINT:"point"},t.geojsonTypes={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},t.events={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},t.updateActions={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},t.meta={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},t.activeStates={ACTIVE:"true",INACTIVE:"false"},t.interactions=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],t.LAT_MIN=-90,t.LAT_RENDERED_MIN=-85,t.LAT_MAX=90,t.LAT_RENDERED_MAX=85,t.LNG_MIN=-270,t.LNG_MAX=270,t}();e.Constants=n},ixLr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.render=function(){var t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(n.Constants.sources.HOT)))return u();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var o=[],i=[];t.isDirty?i=t.getAllIds():(o=t.getChangedIds().filter(function(e){return void 0!==t.get(e)}),i=t.sources.hot.filter(function(e){return e.properties.id&&-1===o.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)}).map(function(t){return t.properties.id})),t.sources.hot=[];var r=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter(function(t){var e=t.properties.id||t.properties.parent;return-1===o.indexOf(e)});var s=r!==t.sources.cold.length||i.length>0;function a(o,n){var i=t.get(o).internal(e);t.ctx.events.currentModeRender(i,function(e){t.sources[n].push(e)})}if(o.forEach(function(t){return a(t,"hot")}),i.forEach(function(t){return a(t,"cold")}),s&&t.ctx.map.getSource(n.Constants.sources.COLD).setData({type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(n.Constants.sources.HOT).setData({type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(n.Constants.events.SELECTION_CHANGE,{features:t.getSelected().map(function(t){return t.toGeoJSON()}),points:t.getSelectedCoordinates().map(function(t){return{type:n.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:n.Constants.geojsonTypes.POINT,coordinates:t.coordinates}}})}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var c=t._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()});t._deletedFeaturesToEmit=[],t.ctx.map.fire(n.Constants.events.DELETE,{features:c})}function u(){t.isDirty=!1,t.clearChangedIds()}u(),t.ctx.map.fire(n.Constants.events.RENDER,{})},t}();e.Render=i},j2bS:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(){}return t.prototype.distance=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},t.prototype.wholeDistance=function(t){for(var e=0,o=0;o<t.length-1;o++)e+=this.distance(t[o],t[o+1]);return e},t.prototype.getBaseLength=function(t){return Math.pow(this.wholeDistance(t),.99)},t.prototype.mid=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},t.prototype.getCircleCenterOfThreePoints=function(t,e,o){var n=[(t[0]+e[0])/2,(t[1]+e[1])/2],i=[n[0]-t[1]+e[1],n[1]+t[0]-e[0]],r=[(t[0]+o[0])/2,(t[1]+o[1])/2],s=[r[0]-t[1]+o[1],r[1]+t[0]-o[0]];return this.getIntersectPoint(n,i,r,s)},t.prototype.getIntersectPoint=function(t,e,o,n){var i=0,r=0,s=0;return t[1]===e[1]?[(r=(n[0]-o[0])/(n[1]-o[1]))*(t[1]-o[1])+o[0],s=t[1]]:o[1]===n[1]?[(i=(e[0]-t[0])/(e[1]-t[1]))*(o[1]-t[1])+t[0],s=o[1]]:(i=(e[0]-t[0])/(e[1]-t[1]),r=(n[0]-o[0])/(n[1]-o[1]),[i*(s=(i*t[1]-t[0]-r*o[1]+o[0])/(i-r))-i*t[1]+t[0],s])},t.prototype.getAzimuth=function(t,e){var o,i=Math.asin(Math.abs(e[1]-t[1])/this.distance(t,e));return e[1]>=t[1]&&e[0]>=t[0]?o=i+Math.PI:e[1]>=t[1]&&e[0]<t[0]?o=n.PlotConstants.TWO_PI-i:e[1]<t[1]&&e[0]<t[0]?o=i:e[1]<t[1]&&e[0]>=t[0]&&(o=Math.PI-i),o},t.prototype.getAngleOfThreePoints=function(t,e,o){var i=this.getAzimuth(e,t)-this.getAzimuth(e,o);return i<0?i+n.PlotConstants.TWO_PI:i},t.prototype.isClockWise=function(t,e,o){return(o[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(o[0]-t[0])},t.prototype.getPointOnLine=function(t,e,o){return[e[0]+t*(o[0]-e[0]),e[1]+t*(o[1]-e[1])]},t.prototype.getCubicValue=function(t,e,o,n,i){var r=1-(t=Math.max(Math.min(t,1),0)),s=t*t,a=s*t,c=r*r,u=c*r;return[u*e[0]+3*c*t*o[0]+3*r*s*n[0]+a*i[0],u*e[1]+3*c*t*o[1]+3*r*s*n[1]+a*i[1]]},t.prototype.getThirdPoint=function(t,e,o,n,i){var r=this.getAzimuth(t,e),s=i?r+o:r-o,a=n*Math.cos(s),c=n*Math.sin(s);return[e[0]+a,e[1]+c]},t.prototype.getArcPoints=function(t,e,o,i){var r,s,a=[],c=i-o;c=c<0?c+n.PlotConstants.TWO_PI:c;for(var u=0;u<=n.PlotConstants.FITTING_COUNT;u++){var p=o+c*u/n.PlotConstants.FITTING_COUNT;r=t[0]+e*Math.cos(p),s=t[1]+e*Math.sin(p),a.push([r,s])}return a},t.prototype.getBisectorNormals=function(t,e,o,i){var r,s,a,c=this.getNormal(e,o,i),u=Math.sqrt(c[0]*c[0]+c[1]*c[1]),p=c[0]/u,l=c[1]/u,h=this.distance(e,o),d=this.distance(o,i);return u>n.PlotConstants.ZERO_TOLERANCE?this.isClockWise(e,o,i)?(r=t*h,s=[o[0]-r*l,o[1]+r*p],r=t*d,a=[o[0]+r*l,o[1]-r*p]):(r=t*h,s=[o[0]+r*l,o[1]-r*p],r=t*d,a=[o[0]-r*l,o[1]+r*p]):(s=[o[0]+t*(e[0]-o[0]),o[1]+t*(e[1]-o[1])],a=[o[0]+t*(i[0]-o[0]),o[1]+t*(i[1]-o[1])]),[s,a]},t.prototype.getNormal=function(t,e,o){var n=t[0]-e[0],i=t[1]-e[1],r=Math.sqrt(n*n+i*i);n/=r,i/=r;var s=o[0]-e[0],a=o[1]-e[1],c=Math.sqrt(s*s+a*a);return[n+(s/=c),i+(a/=c)]},t.prototype.getCurvePoints=function(t,e){for(var o,i,r,s,a=[this.getLeftMostControlPoint(t,e)],c=0;c<e.length-2;c++)o=e[c],i=e[c+1],r=e[c+2],s=this.getBisectorNormals(t,o,i,r),a=a.concat(s);var u=this.getRightMostControlPoint(t,e);a.push(u);var p=[];for(c=0;c<e.length-1;c++){o=e[c],i=e[c+1],p.push(o);for(var l=0;l<n.PlotConstants.FITTING_COUNT;l++){var h=this.getCubicValue(l/n.PlotConstants.FITTING_COUNT,o,a[2*c],a[2*c+1],i);p.push(h)}p.push(i)}return p},t.prototype.getLeftMostControlPoint=function(t,e){var o,i,r=e[0],s=e[1],a=e[2],c=this.getBisectorNormals(0,r,s,a)[0],u=this.getNormal(r,s,a);if(Math.sqrt(u[0]*u[0]+u[1]*u[1])>n.PlotConstants.ZERO_TOLERANCE){var p=this.mid(r,s),l=r[0]-p[0],h=r[1]-p[1],d=2/this.distance(r,s),f=-d*h,g=d*l,y=f*f-g*g,v=2*f*g,P=g*g-f*f,_=c[0]-p[0],m=c[1]-p[1];o=p[0]+y*_+v*m,i=p[1]+v*_+P*m}else o=r[0]+t*(s[0]-r[0]),i=r[1]+t*(s[1]-r[1]);return[o,i]},t.prototype.getRightMostControlPoint=function(t,e){var o,i,r=e.length,s=e[r-3],a=e[r-2],c=e[r-1],u=this.getBisectorNormals(0,s,a,c)[1],p=this.getNormal(s,a,c);if(Math.sqrt(p[0]*p[0]+p[1]*p[1])>n.PlotConstants.ZERO_TOLERANCE){var l=this.mid(a,c),h=c[0]-l[0],d=c[1]-l[1],f=2/this.distance(a,c),g=-f*d,y=f*h,v=g*g-y*y,P=2*g*y,_=y*y-g*g,m=u[0]-l[0],C=u[1]-l[1];o=l[0]+v*m+P*C,i=l[1]+P*m+_*C}else o=c[0]+t*(a[0]-c[0]),i=c[1]+t*(a[1]-c[1]);return[o,i]},t.prototype.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=[],o=t.length-1,n=0;n<=1;n+=.01){for(var i=0,r=0,s=0;s<=o;s++){var a=this.getBinomialFactor(o,s),c=Math.pow(n,s),u=Math.pow(1-n,o-s);i+=a*c*u*t[s][0],r+=a*c*u*t[s][1]}e.push([i,r])}return e.push(t[o]),e},t.prototype.getBinomialFactor=function(t,e){return this.getFactorial(t)/(this.getFactorial(e)*this.getFactorial(t-e))},t.prototype.getFactorial=function(t){if(t<=1)return 1;if(2===t)return 2;if(3===t)return 6;if(4===t)return 24;if(5===t)return 120;for(var e=1,o=1;o<=t;o++)e*=o;return e},t.prototype.getQBSplinePoints=function(t){if(t.length<=2)return t;var e=[],o=t.length-2-1;e.push(t[0]);for(var n=0;n<=o;n++)for(var i=0;i<=1;i+=.05){for(var r=0,s=0,a=0;a<=2;a++){var c=this.getQuadricBSplineFactor(a,i);r+=c*t[n+a][0],s+=c*t[n+a][1]}e.push([r,s])}return e.push(t[t.length-1]),e},t.prototype.getQuadricBSplineFactor=function(t,e){return 0===t?Math.pow(e-1,2)/2:1===t?(-2*Math.pow(e,2)+2*e+1)/2:2===t?Math.pow(e,2)/2:0},t}();e.PlotUtilsService=i},jQIs:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("fMjp"),s=o("ilPD"),a=o("XxFY"),c=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(i.models={MultiPoint:o("9IqW"),MultiLineString:o("5U4P"),MultiPolygon:o("nmUL")},i.takeAction=function(t,e,o,n,i){var r=o.split("."),s=parseInt(r[0],10),a=r[1]?r.slice(1).join("."):null;return t[s][e](a,n,i)},delete i.coordinates,i.model=i.models[n.geometry.type],void 0===i.model)throw new TypeError(n.geometry.type+" is not a valid type");return i.features=i._coordinatesToFeatures(n.geometry.coordinates),i}return i(e,t),e.prototype._coordinatesToFeatures=function(t){var e=this,o=this.model.bind(this);return t.map(function(t){return new o(e.ctx,{id:a.Hat.hat(),type:s.Constants.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},e.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},e.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},e.prototype.getCoordinate=function(t){return this.takeAction(this.features,"getCoordinate",t)},e.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===s.Constants.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},e.prototype.updateCoordinate=function(t,e,o){this.takeAction(this.features,"updateCoordinate",t,e,o),this.changed()},e.prototype.addCoordinate=function(t,e,o){this.takeAction(this.features,"addCoordinate",t,e,o),this.changed()},e.prototype.removeCoordinate=function(t){this.takeAction(this.features,"removeCoordinate",t),this.changed()},e.prototype.getFeatures=function(){return this.features},e}(r.Feature);e.MultiFeature=c},kUrg:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=function(){function t(){}return t.create=function(t,e,o,i){var r=e.geometry.coordinates,s=o.geometry.coordinates;if(r[1]>n.Constants.LAT_RENDERED_MAX||r[1]<n.Constants.LAT_RENDERED_MIN||s[1]>n.Constants.LAT_RENDERED_MAX||s[1]<n.Constants.LAT_RENDERED_MIN)return null;var a=i.project([r[0],r[1]]),c=i.project([s[0],s[1]]),u=i.unproject([(a.x+c.x)/2,(a.y+c.y)/2]);return{type:n.Constants.geojsonTypes.FEATURE,properties:{meta:n.Constants.meta.MIDPOINT,parent:t,lng:u.lng,lat:u.lat,coord_path:o.properties.coord_path},geometry:{type:n.Constants.geojsonTypes.POINT,coordinates:[u.lng,u.lat]}}},t}();e.CreateMidpoint=i},lpZp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("L8Jp"),i=function(){function t(){}return t.isClick=function(t,e,o){void 0===o&&(o={});var i=null!=o.fineTolerance?o.fineTolerance:this.FINE_TOLERANCE,r=null!=o.grossTolerance?o.grossTolerance:this.GROSS_TOLERANCE,s=null!=o.interval?o.interval:this.INTERVAL;t.point=t.point||e.point,t.time=t.time||e.time;var a=n.EuclideanDistance.distance(t.point,e.point);return a<i||a<r&&e.time-t.time<s},t.FINE_TOLERANCE=4,t.GROSS_TOLERANCE=12,t.INTERVAL=500,t}();e.IsClick=i},m7UX:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("ilPD"),s=o("XvwO"),a=o("/pis"),c=o("hiBp"),u=o("bhkv"),p=o("Lc+J"),l=o("F56o"),h=o("xXm1"),d=o("dqH4"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onSetup=function(t){var e=this,o={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(o.initiallySelectedFeatureIds.filter(function(t){return void 0!==e.getFeature(t)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),o},e.prototype.fireUpdate=function(){this.map.fire(r.Constants.events.UPDATE,{action:r.Constants.updateActions.MOVE,features:this.getSelected().map(function(t){return t.toGeoJSON()})})},e.prototype.fireActionable=function(){var t=this,e=this.getSelected(),o=e.filter(function(e){return t.isInstanceOf("MultiFeature",e)}),n=!1;if(e.length>1){n=!0;var i=e[0].type.replace("Multi","");e.forEach(function(t){t.type.replace("Multi","")!==i&&(n=!1)})}var r=o.length>0,s=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:r,trash:s})},e.prototype.getUniqueIds=function(t){return t.length?t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new p.StringSet).values():[]},e.prototype.stopExtendedInteractions=function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},e.prototype.onStop=function(){l.DoubleClickZoom.enable(this)},e.prototype.onMouseMove=function(t){return this.stopExtendedInteractions(t)},e.prototype.onMouseOut=function(t){if(t.dragMoving)return this.fireUpdate()},e.prototype.onTap=function(t,e){return a.CommonSelectors.noTarget(e)?this.clickAnywhere(t):a.CommonSelectors.isOfMetaType(r.Constants.meta.VERTEX)(e)?this.clickOnVertex(t,e):a.CommonSelectors.isFeature(e)?this.clickOnFeature(t,e):void 0},e.prototype.onClick=function(t,e){return a.CommonSelectors.noTarget(e)?this.clickAnywhere(t):a.CommonSelectors.isOfMetaType(r.Constants.meta.VERTEX)(e)?this.clickOnVertex(t,e):a.CommonSelectors.isFeature(e)?this.clickOnFeature(t,e):void 0},e.prototype.clickAnywhere=function(t){var e=this,o=this.getSelectedIds();o.length&&(this.clearSelectedFeatures(),o.forEach(function(t){return e.doRender(t)})),l.DoubleClickZoom.enable(this),this.stopExtendedInteractions(t)},e.prototype.clickOnVertex=function(t,e){this.changeMode(d.PlotConstants.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:r.Constants.cursors.MOVE})},e.prototype.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},e.prototype.clickOnFeature=function(t,e){var o=this;l.DoubleClickZoom.disable(this),this.stopExtendedInteractions(t);var n=a.CommonSelectors.isShiftDown(e),i=this.getSelectedIds(),s=e.featureTarget.properties.id,c=this.isSelected(s);if(!n&&c&&this.getFeature(s).type!==r.Constants.geojsonTypes.POINT)return this.changeMode(d.PlotConstants.modes.DIRECT_SELECT,{featureId:s});c&&n?(this.deselect(s),this.updateUIClasses({mouse:r.Constants.cursors.POINTER}),1===i.length&&l.DoubleClickZoom.enable(this)):!c&&n?(this.select(s),this.updateUIClasses({mouse:r.Constants.cursors.MOVE})):c||n||(i.forEach(function(t){return o.doRender(t)}),this.setSelected(s),this.updateUIClasses({mouse:r.Constants.cursors.MOVE})),this.doRender(s)},e.prototype.onMouseDown=function(t,e){return a.CommonSelectors.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&a.CommonSelectors.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},e.prototype.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=c.MouseEventPoint.mouseEventPoint(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},e.prototype.onTouchStart=function(t,e){if(a.CommonSelectors.isActiveFeature(e))return this.startOnActiveFeature(t,e)},e.prototype.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},e.prototype.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:r.Constants.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(r.Constants.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var o=c.MouseEventPoint.mouseEventPoint(e.originalEvent,this.map.getContainer()),n=Math.min(t.boxSelectStartLocation.x,o.x),i=Math.max(t.boxSelectStartLocation.x,o.x),s=Math.min(t.boxSelectStartLocation.y,o.y),a=Math.max(t.boxSelectStartLocation.y,o.y),u="translate("+n+"px, "+s+"px)";t.boxSelectElement.style.transform=u,t.boxSelectElement.style.WebkitTransform=u,t.boxSelectElement.style.width=i-n+"px",t.boxSelectElement.style.height=a-s+"px"},e.prototype.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};h.MoveFeatures.move(this.getSelected(),o),t.dragMoveLocation=e.lngLat},e.prototype.onMouseUp=function(t,e){var o=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var n=[t.boxSelectStartLocation,c.MouseEventPoint.mouseEventPoint(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,n,"click"),s=this.getUniqueIds(i).filter(function(t){return!o.isSelected(t)});s.length&&(this.select(s),s.forEach(function(t){return o.doRender(t)}),this.updateUIClasses({mouse:r.Constants.cursors.MOVE}))}this.stopExtendedInteractions(t)},e.prototype.toDisplayFeatures=function(t,e,o){e.properties.active=this.isSelected(e.properties.id)?r.Constants.activeStates.ACTIVE:r.Constants.activeStates.INACTIVE;var n=this._ctx.store.get(e.properties.id).mode;n&&(e.geometry.coordinates=n.geoJsonOption(e.geometry.coordinates)),o(e),this.fireActionable(),e.properties.active===r.Constants.activeStates.ACTIVE&&e.geometry.type!==r.Constants.geojsonTypes.POINT&&u.CreateSupplementaryPoints.create(e).forEach(o)},e.prototype.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},e.prototype.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],o=[],n=t[0].type.replace("Multi",""),i=0;i<t.length;i++){var s=t[i];if(s.type.replace("Multi","")!==n)return;s.type.includes("Multi")?s.getCoordinates().forEach(function(t){e.push(t)}):e.push(s.getCoordinates()),o.push(s.toGeoJSON())}if(o.length>1){var a=this.newFeature({type:r.Constants.geojsonTypes.FEATURE,properties:o[0].properties,geometry:{type:"Multi"+n,coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(r.Constants.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:o})}this.fireActionable()}},e.prototype.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var o=[],n=[],i=function(i){var r=e[i];s.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach(function(e){t.addFeature(e),e.properties=r.properties,o.push(e.toGeoJSON()),t.select([e.id])}),s.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))},s=this,a=0;a<e.length;a++)i(a);o.length>1&&this.map.fire(r.Constants.events.UNCOMBINE_FEATURES,{createdFeatures:o,deletedFeatures:n}),this.fireActionable()}},e.prototype.getType=function(){return"select"},e}(s.ModeInterfaceAccessors);e.SimpleSelect=f},nmUL:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.coordinates=n.coordinates.map(function(t){return t.slice(0,-1)}),n}return i(e,t),e.prototype.isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return t.length>2})},e.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},e.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},e.prototype.addCoordinate=function(t,e,o){this.changed();var n=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[n[0]].splice(n[1],0,[e,o])},e.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),o=this.coordinates[e[0]];o&&(o.splice(e[1],1),o.length<3&&this.coordinates.splice(e[0],1))},e.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)});return this.coordinates[e[0]][e[1]]},e.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},e.prototype.updateCoordinate=function(t,e,o){this.changed();var n=t.split("."),i=parseInt(n[0],10),r=parseInt(n[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][r]=[e,o]},e}(o("fMjp").Feature);e.Polygon=r},okug:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("TrCf"),i=o("Rwv5"),r=function(){function t(){this.es=new n.OlPlotEditService,this.ds=new i.OlPlotDrawService}return t.prototype.init=function(t,e){var o=this,n=this.ds,i=this.es;t.on("click",function(e){if(!n.isDrawing()){var o=t.forEachFeatureAtPixel(e.pixel,function(t,e){return t});o?i.activate(o):i.deactivate()}});var r=new ol.style.Stroke({color:"#FF0000",width:2}),s=new ol.style.Fill({color:"rgba(0,255,0,0.4)"}),a=new ol.style.Circle({fill:s,stroke:r,radius:8}),c=new ol.style.Style({image:a,fill:s,stroke:r}),u=new ol.layer.Vector({source:new ol.source.Vector});u.setStyle(c),u.setMap(t),this.drawOverlay=u,this.es.init(t),this.ds.init(t,function(t){u.getSource().addFeature(t),o.es.activate(t),e&&e(t)})},t.prototype.draw=function(t,e){this.es.deactivate(),this.ds.activate(t,e)},t.prototype.delete=function(){this.drawOverlay&&this.es.activePlot&&(this.drawOverlay.getSource().removeFeature(this.es.activePlot),this.es.deactivate())},t.prototype.input=function(t){},t}();e.OlPlotService=r},p4gN:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("wJYD"),i=o("ysQW"),r=o("FnXg"),s=o("92qF"),a=o("ilPD"),c=function(){function t(){}return t.prototype.init=function(t,e){var o=n.Options.op(null),s={options:o};this.api=new i.Api(s),s.api=this.api;var c=r.Setup.get(s);c.onAdd(t),s.setup=c,this.api.onAdd=c.onAdd,this.api.onRemove=c.onRemove,this.api.types=a.Constants.types,this.api.options=o},t.prototype.draw=function(t,e){this.api.changeMode(t)},t.prototype.delete=function(){},t.prototype.output=function(){var t=this.api.ctx.store.getAll();if(t&&t.length>0){var e={type:"FeatureCollection",features:[]};t.forEach(function(t){if("Point"===t.type){var o={type:"Feature",properties:{dType:t.mode.getType()},geometry:{type:"Point",coordinates:t.coordinates}};e.features.push(o)}else if("LineString"===t.type){var n={type:"Feature",properties:{dType:t.mode.getType()},geometry:{type:"LineString",coordinates:t.coordinates}};e.features.push(n)}else if("Polygon"===t.type){var i={type:"Feature",properties:{dType:t.mode.getType()},geometry:{type:"Polygon",coordinates:t.coordinates}};e.features.push(i)}});var o=new Blob([JSON.stringify(e)],{type:""});saveAs(o,"plot.json")}else alert("!")},t.prototype.input=function(t){var e=this;JSON.parse(t).features.forEach(function(t){e.inputItem(t.properties.dType,t.geometry.coordinates)})},t.prototype.inputItem=function(t,e){var o=n.Options.defaultOptions.modes[t];if(void 0===o)throw new Error(t+" is not valid");var i=new s.ModeWrapper(new o(this.api.ctx),{});i.start(),i.state.polygon&&(i.state.polygon.coordinates=e),i.state.line&&(i.state.line.coordinates=e),i.state.point&&(i.state.point.coordinates=e)},t}();e.MbPlotService=c},qbZy:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("1WJV"),s=o("j2bS"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxArrowLength=3e6,e.arrowLengthScale=5,e}return i(e,t),e.prototype.getType=function(){return"draw_straight_arrow"},e.prototype.geoJsonOption=function(t){var e=t;if(e.length<2)return t;var o=e[0],n=e[1],i=new s.PlotUtilsService,r=i.distance(o,n)/this.arrowLengthScale;return r=r>this.maxArrowLength?this.maxArrowLength:r,[o,n,i.getThirdPoint(o,n,Math.PI/6,r,!1),n,i.getThirdPoint(o,n,Math.PI/6,r,!0)]},e.prototype.onClick=function(t,e){this.clickAnywhere(t,e)},e}(r.DrawLineString);e.DrawStraightArrow=a},qf1g:function(t,e){},r5cf:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("dqH4"),i=function(){function t(t,e){this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.headTailFactor=.8,this.type="attackarrow",this.geo=new ol.geom.Polygon([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2))if(2!==this.getPointCount()){var t=this.getPoints(),e=t[0],o=t[1];this.pu.isClockWise(t[0],t[1],t[2])&&(e=t[1],o=t[0]);var n=[this.pu.mid(e,o)].concat(t.slice(2)),i=this.getArrowHeadPoints(n,e,o),r=i[0],s=i[4],a=this.pu.distance(e,o)/this.pu.getBaseLength(n),c=this.getArrowBodyPoints(n,r,s,a),u=c.length,p=[e].concat(c.slice(0,u/2));p.push(r);var l=[o].concat(c.slice(u/2,u));l.push(s),p=this.pu.getQBSplinePoints(p),l=this.pu.getQBSplinePoints(l),this.geo.setCoordinates([p.concat(i,l.reverse())])}else this.geo.setCoordinates([this.points])},t.prototype.getArrowHeadPoints=function(t,e,o){var i=this.pu.getBaseLength(t),r=i*this.headHeightFactor,s=t[t.length-1];i=this.pu.distance(s,t[t.length-2]);var a=this.pu.distance(e,o);r>a*this.headTailFactor&&(r=a*this.headTailFactor);var c=r*this.headWidthFactor,u=r*this.neckWidthFactor,p=(r=r>i?i:r)*this.neckHeightFactor,l=this.pu.getThirdPoint(t[t.length-2],s,0,r,!0),h=this.pu.getThirdPoint(t[t.length-2],s,0,p,!0),d=this.pu.getThirdPoint(s,l,n.PlotConstants.HALF_PI,c,!1),f=this.pu.getThirdPoint(s,l,n.PlotConstants.HALF_PI,c,!0);return[this.pu.getThirdPoint(s,h,n.PlotConstants.HALF_PI,u,!1),d,s,f,this.pu.getThirdPoint(s,h,n.PlotConstants.HALF_PI,u,!0)]},t.prototype.getArrowBodyPoints=function(t,e,o,n){for(var i=this.pu.wholeDistance(t),r=this.pu.getBaseLength(t)*n,s=(r-this.pu.distance(e,o))/2,a=0,c=[],u=[],p=1;p<t.length-1;p++){var l=this.pu.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2,h=(r/2-(a+=this.pu.distance(t[p-1],t[p]))/i*s)/Math.sin(l),d=this.pu.getThirdPoint(t[p-1],t[p],Math.PI-l,h,!0),f=this.pu.getThirdPoint(t[p-1],t[p],l,h,!1);c.push(d),u.push(f)}return c.concat(u)},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){this.points=t||[],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t.prototype.setCoordinates=function(t){this.geo.setCoordinates(t)},t}();e.OlAttackArrow=i},rCer:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.equal=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())},t}();e.StringSetsAreEqual=n},s411:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_rectangle"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<3)return t;var o=e[0],n=e[1],i=Math.min(o[0],n[0]),r=Math.max(o[0],n[0]),s=Math.min(o[1],n[1]),a=Math.max(o[1],n[1]);return[[[i,a],[r,a],[r,s],[i,s]]]},e}(o("/bdh").DrawPolygon);e.DrawRectangle=r},swiT:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.type="straightarrow",this.maxArrowLength=3e6,this.arrowLengthScale=5,this.geo=new ol.geom.LineString([]),this.pu=e,this.setPoints(t),this.geo.plot=this}return t.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.getPoints(),e=t[0],o=t[1],n=this.pu.distance(e,o)/this.arrowLengthScale;n=n>this.maxArrowLength?this.maxArrowLength:n;var i=this.pu.getThirdPoint(e,o,Math.PI/6,n,!1),r=this.pu.getThirdPoint(e,o,Math.PI/6,n,!0);this.geo.setCoordinates([e,o,i,o,r])}},t.prototype.getGeo=function(){return this.geo},t.prototype.isPlot=function(){return!0},t.prototype.setPoints=function(t){var e=t||[];e.length<=2?this.points=e:this.points=[e[0],e[1]],this.points.length>=1&&this.generate()},t.prototype.getPoints=function(){return this.points.slice(0)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.updatePoint=function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())},t.prototype.updateLastPoint=function(t){this.updatePoint(t,this.points.length-1)},t.prototype.finishDrawing=function(){},t}();e.OlStraightArrow=n},tQ3s:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("35jS"),r=o("3i3p"),s=o("Lc+J"),a=o("ixLr"),c=function(){function t(t){this._emitSelectionChange=!1,this.isDirty=!1,this._features={},this._featureIds=new s.StringSet,this._selectedFeatureIds=new s.StringSet,this._selectedCoordinates=[],this._changedFeatureIds=new s.StringSet,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=i.Throttle.throttle(a.Render.render,16,this),this.isDirty=!1}return t.prototype.createRenderBatch=function(){var t=this,e=this.render,o=0;return this.render=function(){o++},function(){t.render=e,o>0&&t.render()}},t.prototype.setDirty=function(){return this.isDirty=!0,this},t.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},t.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},t.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},t.prototype.getAllIds=function(){return this._featureIds.values()},t.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},t.prototype.delete=function(t,e){var o=this;return void 0===e&&(e={}),r.ToDenseArray.toDenseArray(t).forEach(function(t){o._featureIds.has(t)&&(o._featureIds.delete(t),o._selectedFeatureIds.delete(t),e.silent||-1===o._deletedFeaturesToEmit.indexOf(o._features[t])&&o._deletedFeaturesToEmit.push(o._features[t]),delete o._features[t],o.isDirty=!0)}),this.refreshSelectedCoordinates.call(this,e),this},t.prototype.get=function(t){return this._features[t]},t.prototype.getAll=function(){var t=this;return Object.keys(this._features).map(function(e){return t._features[e]})},t.prototype.select=function(t,e){var o=this;return void 0===e&&(e={}),r.ToDenseArray.toDenseArray(t).forEach(function(t){o._selectedFeatureIds.has(t)||(o._selectedFeatureIds.add(t),o._changedFeatureIds.add(t),e.silent||(o._emitSelectionChange=!0))}),this},t.prototype.deselect=function(t,e){var o=this;return void 0===e&&(e={}),r.ToDenseArray.toDenseArray(t).forEach(function(t){o._selectedFeatureIds.has(t)&&(o._selectedFeatureIds.delete(t),o._changedFeatureIds.add(t),e.silent||(o._emitSelectionChange=!0))}),this.refreshSelectedCoordinates.call(this,e),this},t.prototype.clearSelected=function(t){return void 0===t&&(t={}),this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},t.prototype.setSelected=function(t,e){var o=this;return void 0===e&&(e={}),t=r.ToDenseArray.toDenseArray(t),this.deselect(this._selectedFeatureIds.values().filter(function(e){return-1===t.indexOf(e)}),{silent:e.silent}),this.select(t.filter(function(t){return!o._selectedFeatureIds.has(t)}),{silent:e.silent}),this},t.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},t.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},t.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},t.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map(function(e){return t.get(e)})},t.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map(function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}})},t.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},t.prototype.setFeatureProperty=function(t,e,o){this.get(t).setProperty(e,o),this.featureChanged(t)},t.prototype.refreshSelectedCoordinates=function(t){var e=this,o=this._selectedCoordinates.filter(function(t){return e._selectedFeatureIds.has(t.feature_id)});this._selectedCoordinates.length===o.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=o},t.prototype.storeMapConfig=function(){var t=this;n.Constants.interactions.forEach(function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())})},t.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach(function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()})},t.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]},t}();e.Store=c},vGT5:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=o("dqH4"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getType=function(){return"draw_ellipse"},e.prototype.geoJsonOption=function(t){var e=t[0];if(e.length<3)return t;e.splice(e.length-1,1);var o=e[0],n=e[1],i=(new r.PlotUtilsService).mid(o,n),s=Math.abs((o[0]-n[0])/2),a=Math.abs((o[1]-n[1])/2);return[this.generatePoints(i,s,a)]},e.prototype.generatePoints=function(t,e,o){for(var n,i,r,a=[],c=0;c<=s.PlotConstants.FITTING_COUNT;c++)r=2*Math.PI*c/s.PlotConstants.FITTING_COUNT,n=t[0]+e*Math.cos(r),i=t[1]+o*Math.sin(r),a.push([n,i]);return a},e}(o("/bdh").DrawPolygon);e.DrawEllipse=a},wJYD:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("8Hrj"),i=o("ilPD"),r=o("QMwO"),s=o("dqH4"),a=o("m7UX"),c=o("SOr2"),u=o("KFD6"),p=o("ayIp"),l=o("HqoJ"),h=o("/nEr"),d=o("RD/j"),f=o("y9bb"),g=o("M1oF"),y=o("vGT5"),v=o("b1V8"),P=o("Jg3P"),_=o("Q7Tr"),m=o("W2UG"),C=o("1WJV"),w=o("/dta"),T=o("2jCd"),O=o("/bdh"),E=o("s411"),M=o("2vKu"),A=o("fYdq"),b=o("qbZy"),I=o("Re0c"),S=o("0SqO"),F=function(){function t(){}return t.op=function(e){null==e&&(e={});var o=n.ObjectCopy.xtend([e]);return e.controls||(o.controls={}),!1===e.displayControlsDefault?o.controls=n.ObjectCopy.xtend([t.hideControls,e.controls]):o.controls=n.ObjectCopy.xtend([t.showControls,e.controls]),(o=n.ObjectCopy.xtend([t.defaultOptions,o])).styles=t.addSources(o.styles,"cold").concat(t.addSources(o.styles,"hot")),o},t.addSources=function(t,e){return t.map(function(t){return t.source?t:n.ObjectCopy.xtend([t,{id:t.id+"."+e,source:"hot"===e?i.Constants.sources.HOT:i.Constants.sources.COLD}])})},t.defaultOptions={defaultMode:s.PlotConstants.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:r.Theme.theme,modes:{simple_select:a.SimpleSelect,direct_select:c.DirectSelect,draw_arc:u.DrawArc,draw_assault_direction:p.DrawAssaultDirection,draw_attack_arrow:l.DrawAttackArrow,draw_circle:h.DrawCircle,draw_closed_curve:d.DrawClosedCurve,draw_curve:f.DrawCurve,draw_double_arrow:g.DrawDoubleArrow,draw_ellipse:y.DrawEllipse,draw_fine_arrow:v.DrawFineArrow,draw_freehand_line:P.DrawFreehandLine,draw_freehand_polygon:_.DrawFreehandPolygon,draw_gathering_place:m.DrawGatheringPlace,draw_line_string:C.DrawLineString,draw_lune:w.DrawLune,draw_point:T.DrawPoint,draw_polygon:O.DrawPolygon,draw_rectangle:E.DrawRectangle,draw_sector:M.DrawSector,draw_squad_combat:A.DrawSquadCombat,draw_straight_arrow:b.DrawStraightArrow,draw_tailed_attack_arrow:I.DrawTailedAttackArrow,draw_tailed_squad_combat:S.DrawTailedSquadCombat},controls:{},userProperties:!1},t.showControls={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},t.hideControls={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1},t}();e.Options=F},whT9:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("Eyi2"),r=o("CZ9u"),s=o("+swA"),a=o("lpZp"),c=o("2QQf"),u=o("92qF"),p=function(){function t(t){this.mouseDownInfo={},this.touchStartInfo={},this.events={},this.isKeyModeValid=function(t){return!(8===t||46===t||t>=48&&t<=57)},this.actionState={trash:!1,combineFeatures:!1,uncombineFeatures:!1},this.modes=t.options.modes,this.ctx=t}return t.prototype.getApi=function(){var t=this;return{start:function(){t.currentModeName=t.ctx.options.defaultMode,t.getMode(t.currentModeName,{})},changeMode:function(e,o,n){t.changeMode(e,o,n,t)},actionable:function(e){t.actionable(e,t)},currentModeName:function(){return t.currentModeName},currentModeRender:function(e,o){return t.currentMode.render(e,o)},fire:function(e,o){t.events[e]&&t.events[e](o)},addEventListeners:function(){t.mousemoveEvent=function(e){t.mousemove(e,t)},t.ctx.map.on("mousemove",t.mousemoveEvent),t.mousedownEvent=function(e){t.mousedown(e,t)},t.ctx.map.on("mousedown",t.mousedownEvent),t.mouseupEvent=function(e){t.mouseup(e,t)},t.ctx.map.on("mouseup",t.mouseupEvent),t.dataEvent=function(e){t.data(e,t)},t.ctx.map.on("data",t.dataEvent),t.touchmoveEvent=function(e){t.touchmove(e,t)},t.ctx.map.on("touchmove",t.touchmoveEvent),t.touchstartEvent=function(e){t.touchstart(e,t)},t.ctx.map.on("touchstart",t.touchstartEvent),t.touchendEvent=function(e){t.touchend(e,t)},t.ctx.map.on("touchend",t.touchendEvent),t.mouseoutEvent=function(e){t.mouseout(e,t)},t.ctx.container.addEventListener("mouseout",t.mouseoutEvent),t.ctx.options.keybindings&&(t.keydownEvent=function(e){t.keydown(e,t)},t.ctx.container.addEventListener("keydown",t.keydownEvent),t.keyupEvent=function(e){t.keyup(e,t)},t.ctx.container.addEventListener("keyup",t.keyupEvent))},removeEventListeners:function(){t.ctx.map.off("mousemove",t.mousemoveEvent),t.ctx.map.off("mousedown",t.mousedownEvent),t.ctx.map.off("mouseup",t.mouseupEvent),t.ctx.map.off("data",t.dataEvent),t.ctx.map.off("touchmove",t.touchmoveEvent),t.ctx.map.off("touchstart",t.touchstartEvent),t.ctx.map.off("touchend",t.touchendEvent),t.ctx.container.removeEventListener("mouseout",t.mouseoutEvent),t.ctx.options.keybindings&&(t.ctx.container.removeEventListener("keydown",t.keydownEvent),t.ctx.container.removeEventListener("keyup",t.keyupEvent))},trash:function(e){t.currentMode.trash(e)},combineFeatures:function(){t.currentMode.combineFeatures()},uncombineFeatures:function(){t.currentMode.uncombineFeatures()},getMode:function(){return t.currentModeName}}},t.prototype.drag=function(t,e){e({point:t.point,time:(new Date).getTime()})?(this.ctx.ui.queueMapClasses({mouse:n.Constants.cursors.DRAG}),this.currentMode.drag(t)):t.originalEvent.stopPropagation()},t.prototype.mousedrag=function(t){var e=this;this.drag(t,function(t){return!a.IsClick.isClick(e.mouseDownInfo,t)})},t.prototype.touchdrag=function(t){var e=this;this.drag(t,function(t){return!c.IsTap.isTap(e.touchStartInfo,t)})},t.prototype.mousemove=function(t,e){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return e.mousedrag(t);var o=r.GetFeatureAtAndSetCursors.op(t,e.ctx);t.featureTarget=o,e.currentMode.mousemove(t)},t.prototype.mousedown=function(t,e){e.mouseDownInfo={time:(new Date).getTime(),point:t.point};var o=r.GetFeatureAtAndSetCursors.op(t,e.ctx);t.featureTarget=o,e.currentMode.mousedown(t)},t.prototype.mouseup=function(t,e){var o=r.GetFeatureAtAndSetCursors.op(t,e.ctx);t.featureTarget=o,a.IsClick.isClick(e.mouseDownInfo,{point:t.point,time:(new Date).getTime()})?e.currentMode.click(t):e.currentMode.mouseup(t)},t.prototype.mouseout=function(t,e){e.currentMode.mouseout(t)},t.prototype.touchstart=function(t,e){if(t.originalEvent.preventDefault(),e.ctx.options.touchEnabled){e.touchStartInfo={time:(new Date).getTime(),point:t.point};var o=s.FeaturesAt.featuresAtTouch(t,null,e.ctx)[0];t.featureTarget=o,e.currentMode.touchstart(t)}},t.prototype.touchmove=function(t,e){if(t.originalEvent.preventDefault(),e.ctx.options.touchEnabled)return e.currentMode.touchmove(t),e.touchdrag(t)},t.prototype.touchend=function(t,e){if(t.originalEvent.preventDefault(),e.ctx.options.touchEnabled){var o=s.FeaturesAt.featuresAtTouch(t,null,e.ctx)[0];t.featureTarget=o,c.IsTap.isTap(e.touchStartInfo,{time:(new Date).getTime(),point:t.point})?e.currentMode.tap(t):e.currentMode.touchend(t)}},t.prototype.keydown=function(t,e){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.ctx.options.controls.trash?e.isKeyModeValid(t.keyCode)&&e.currentMode.keydown(t):(t.preventDefault(),e.currentMode.trash()))},t.prototype.keyup=function(t,e){e.isKeyModeValid(t.keyCode)&&e.currentMode.keyup(t)},t.prototype.zoomend=function(){this.ctx.store.changeZoom()},t.prototype.data=function(t,e){if("style"===t.dataType){var o=e.ctx,n=o.setup,i=o.map,r=o.options,s=o.store;r.styles.some(function(t){return i.getLayer(t.id)})||(n.addLayers(),s.setDirty(),s.render())}},t.prototype.changeMode=function(t,e,o,i){void 0===o&&(o={}),i.currentMode&&i.currentMode.stop(),i.getMode(t,e),o.silent||i.ctx.map.fire(n.Constants.events.MODE_CHANGE,{mode:t}),i.ctx.store.setDirty(),i.ctx.store.render()},t.prototype.getMode=function(t,e){var o=this.modes[t];if(void 0===o)throw new Error(t+" is not valid");this.currentModeName=t;var n=new u.ModeWrapper(new o(this.ctx),e);this.currentMode=i.ModeHandler.handler(n,this.ctx)},t.prototype.actionable=function(t,e){var o=!1;Object.keys(t).forEach(function(n){if(void 0===e.actionState[n])throw new Error("Invalid action type");e.actionState[n]!==t[n]&&(o=!0),e.actionState[n]=t[n]}),o&&e.ctx.map.fire(n.Constants.events.ACTIONABLE,{actions:e.actionState})},t}();e.Events=p},xXm1:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("VVt0"),i=o("ilPD"),r=function(){function t(){}return t.move=function(t,e){var o=n.ConstrainFeatureMovement.constrain(t.map(function(t){return t.toGeoJSON()}),e);t.forEach(function(t){var e,n=t.getCoordinates(),r=function(t){var e={lng:t[0]+o.lng,lat:t[1]+o.lat};return[e.lng,e.lat]},s=function(t){return t.map(function(t){return r(t)})};t.type===i.Constants.geojsonTypes.POINT?e=r(n):t.type===i.Constants.geojsonTypes.LINE_STRING||t.type===i.Constants.geojsonTypes.MULTI_POINT?e=n.map(r):t.type===i.Constants.geojsonTypes.POLYGON||t.type===i.Constants.geojsonTypes.MULTI_LINE_STRING?e=n.map(s):t.type===i.Constants.geojsonTypes.MULTI_POLYGON&&(e=n.map(function(t){return t.map(function(t){return s(t)})})),t.incomingCoords(e)})},t}();e.MoveFeatures=r},y9bb:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o("j2bS"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t=.3,e}return i(e,t),e.prototype.getType=function(){return"draw_curve"},e.prototype.geoJsonOption=function(t){var e=t.length;return e<2?t:2===e?t:(new r.PlotUtilsService).getCurvePoints(this.t,t)},e.prototype.onClick=function(t,e){this.clickAnywhere(t,e)},e}(o("1WJV").DrawLineString);e.DrawCurve=s},ysQW:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("ilPD"),i=o("8Hrj"),r=o("+swA"),s=o("rCer"),a=o("Lc+J"),c=o("XxFY"),u=o("nmUL"),p=o("5U4P"),l=o("9IqW"),h=o("jQIs"),d=o("dqH4"),f=function(){function t(t){this.featureTypes={Polygon:u.Polygon,LineString:p.LineString,Point:l.Point,MultiPolygon:h.MultiFeature,MultiLineString:h.MultiFeature,MultiPoint:h.MultiFeature},this.ctx=t}return t.prototype.getFeatureIdsAt=function(t){return r.FeaturesAt.featuresAtClick({point:t},null,this.ctx).map(function(t){return t.properties.id})},t.prototype.getSelectedIds=function(){return this.ctx.store.getSelectedIds()},t.prototype.getSelected=function(){var t=this;return{type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:this.ctx.store.getSelectedIds().map(function(e){return t.ctx.store.get(e)}).map(function(t){return t.toGeoJSON()})}},t.prototype.getSelectedPoints=function(){return{type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:this.ctx.store.getSelectedCoordinates().map(function(t){return{type:n.Constants.geojsonTypes.FEATURE,properties:{},geometry:{type:n.Constants.geojsonTypes.POINT,coordinates:t.coordinates}}})}},t.prototype.set=function(t){if(void 0===t.type||t.type!==n.Constants.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(t.features))throw new Error("Invalid FeatureCollection");var e=this.ctx.store.createRenderBatch(),o=this.ctx.store.getAllIds().slice(),i=this.add(t),r=new a.StringSet(i);return o.filter(function(t){return!r.has(t)}).length,e(),i},t.prototype.add=function(t){var e=this,o=mapboxgl.geojsonhint.hint(t,{precisionWarning:!1}).filter(function(t){return"message"!==t.level});if(o.length)throw new Error(o[0].message);var n=JSON.parse(JSON.stringify(mapboxgl.normalize(t))).features.map(function(t){if(t.id=t.id||c.Hat.hat(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.ctx.store.get(t.id)||e.ctx.store.get(t.id).type!==t.geometry.type){var o=e.featureTypes[t.geometry.type];if(void 0===o)throw new Error("Invalid geometry type: "+t.geometry.type+".");var n=new o(e.ctx,t);e.ctx.store.add(n)}else{(n=e.ctx.store.get(t.id)).properties=t.properties,i.ObjectCopy.isEqual(n.getCoordinates(),t.geometry.coordinates)||n.incomingCoords(t.geometry.coordinates)}return t.id});return this.ctx.store.render(),n},t.prototype.get=function(t){var e=this.ctx.store.get(t);if(e)return e.toGeoJSON()},t.prototype.getAll=function(){return{type:n.Constants.geojsonTypes.FEATURE_COLLECTION,features:this.ctx.store.getAll().map(function(t){return t.toGeoJSON()})}},t.prototype.delete=function(t){return this.ctx.store.delete(t,{silent:!0}),this.getMode()!==d.PlotConstants.modes.DIRECT_SELECT||this.ctx.store.getSelectedIds().length?this.ctx.store.render():this.ctx.events.changeMode(d.PlotConstants.modes.SIMPLE_SELECT,void 0,{silent:!0}),this},t.prototype.deleteAll=function(){return this.ctx.store.delete(this.ctx.store.getAllIds(),{silent:!0}),this.getMode()===d.PlotConstants.modes.DIRECT_SELECT?this.ctx.events.changeMode(d.PlotConstants.modes.SIMPLE_SELECT,void 0,{silent:!0}):this.ctx.store.render(),this},t.prototype.changeMode=function(t,e){return void 0===e&&(e={}),t===d.PlotConstants.modes.SIMPLE_SELECT&&this.getMode()===d.PlotConstants.modes.SIMPLE_SELECT?s.StringSetsAreEqual.equal(e.featureIds||[],this.ctx.store.getSelectedIds())?this:(this.ctx.store.setSelected(e.featureIds,{silent:!0}),this.ctx.store.render(),this):t===d.PlotConstants.modes.DIRECT_SELECT&&this.getMode()===d.PlotConstants.modes.DIRECT_SELECT&&e.featureId===this.ctx.store.getSelectedIds()[0]?this:(this.ctx.events.changeMode(t,e,{silent:!0}),this)},t.prototype.getMode=function(){return this.ctx.events.getMode()},t.prototype.trash=function(){return this.ctx.events.trash({silent:!0}),this},t.prototype.combineFeatures=function(){return this.ctx.events.combineFeatures({silent:!0}),this},t.prototype.uncombineFeatures=function(){return this.ctx.events.uncombineFeatures({silent:!0}),this},t.prototype.setFeatureProperty=function(t,e,o){return this.ctx.store.setFeatureProperty(t,e,o),this},t}();e.Api=f},zAV1:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("j2bS"),i=o("KcR1"),r=o("ilG6"),s=o("CkyP"),a=o("Ly2y"),c=o("V42L"),u=o("6q0j"),p=o("4CWL"),l=o("swiT"),h=o("S8cF"),d=o("r5cf"),f=o("LKjq"),g=o("/JwR"),y=o("+LXD"),v=o("EXYi"),P=o("7huL"),_=o("/6zq"),m=o("FiTb"),C=o("1X9b"),w=o("4Ufx"),T=o("0itJ"),O=o("75IG"),E=o("17lH"),M=function(){function t(){this.pu=new n.PlotUtilsService}return t.prototype.createPlot=function(t,e){switch(t){case"draw_arc":return new i.OlArc(e,this.pu);case"draw_ellipse":return new r.OlEllipse(e,this.pu);case"draw_curve":return new s.OlCurve(e,this.pu);case"draw_closed_curve":return new a.OlClosedCurve(e,this.pu);case"draw_lune":return new c.OlLune(e,this.pu);case"draw_sector":return new u.OlSector(e,this.pu);case"draw_gathering_place":return new p.OlGatheringPlace(e,this.pu);case"draw_straight_arrow":return new l.OlStraightArrow(e,this.pu);case"draw_assault_direction":return new h.OlAssaultDirection(e,this.pu);case"draw_attack_arrow":return new d.OlAttackArrow(e,this.pu);case"draw_tailed_attack_arrow":return new f.OlTailedAttackArrow(e,this.pu);case"draw_squad_combat":return new g.OlSquadCombat(e,this.pu);case"draw_tailed_squad_combat":return new y.OlTailedSquadCombat(e,this.pu);case"draw_fine_arrow":return new v.OlFineArrow(e,this.pu);case"draw_circle":return new P.OlCircle(e,this.pu);case"draw_double_arrow":return new _.OlDoubleArrow(e,this.pu);case"draw_line_string":return new m.OlPolyline(e,this.pu);case"draw_freehand_line":return new C.OlFreehandLine(e,this.pu);case"draw_polygon":return new w.OlPolygon(e,this.pu);case"draw_freehand_polygon":return new T.OlFreehandPolygon(e,this.pu);case"draw_rectangle":return new O.OlRectangle(e,this.pu);case"draw_point":return new E.OlMarker(e,this.pu)}return null},t}();e.OlPlotFactoryService=M}})});